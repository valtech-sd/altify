(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4039)}])},4039:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var s=n(5893),a=n(9008),i=n.n(a),r=n(7294),o=n(2337),c=n(4848),l=n.n(c);let u="https://altify-api.azurewebsites.net";var d=n(5697),p=n(1749),g=n(5036);let h=["ImageType","Faces","Adult","Categories","Color","Tags","Description","Objects","Brands"],f=async e=>e.filter(e=>"text"===e.name.toLowerCase()),x=async e=>e.filter(e=>"handwriting"===e.name.toLowerCase()),m=e=>new Promise(t=>{setTimeout(t,e)});async function y(e){let t=new p.FV(new g.C({inHeader:{"Ocp-Apim-Subscription-Key":"b8de935b3a0b4bafaea5fe58efc98d22"}}),"https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/"),n=await t.analyzeImage(e,{visualFeatures:h});return(f(n.tags)||x(n.tags))&&(n.text=await j(t,e)),{URL:e,...n}}let j=async(e,t)=>{let n=await e.read(t),s=n.operationLocation.split("/").slice(-1)[0],a=Date.now();for(console.log("".concat(a," -").concat(null==n?void 0:n.status," "));"succeeded"!==n.status;)await m(500),console.log("".concat(Date.now()-a," -").concat(null==n?void 0:n.status," ")),n=await e.getReadResult(s);return n.analyzeResult};async function w(e){let t=await fetch("".concat(u,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:e})}),n=await t.json();return n.result}var b=n(7297),v=n(9521);function C(){let e=(0,b.Z)(["\n  padding: 12px 0;\n  color: black;\n  background-color: rgb(118, 248, 176);\n  border: none;\n  border-radius: 4px;\n  text-align: center;\n  cursor: pointer;\n  width: 100%;\n"]);return C=function(){return e},e}let T=v.ZP.input(C()),P=e=>{let{onClick:t,header:n}=e;return(0,s.jsx)(T,{type:"button",value:"Get Suggestion (".concat(n,")"),onClick:t})};function _(){let e=(0,b.Z)(["\n  border-radius: 4px;\n  border: 1px solid #424242;\n  padding: 10px;\n"]);return _=function(){return e},e}function S(){let e=(0,b.Z)(["\n  color: rgb(118, 248, 176);\n  margin: 0,\n  text-align: center;\n"]);return S=function(){return e},e}function k(){let e=(0,b.Z)(["\n  display: flex;\n  align-items: center;\n"]);return k=function(){return e},e}function A(){let e=(0,b.Z)(["\n  margin-right: 8px;\n"]);return A=function(){return e},e}let N=v.ZP.div(_()),Z=v.ZP.h2(S()),O=v.ZP.p(k()),R=v.ZP.b(A()),z={onClick:d.func.isRequired,header:d.string.isRequired,fetched:d.bool.isRequired,suggestion:d.string,chatGTP:d.string},G=e=>{let{onClick:t,header:n,fetched:a,suggestion:i,chatGTP:r}=e;return(0,s.jsx)("div",{style:{marginTop:5},children:a?(0,s.jsxs)(N,{children:[(0,s.jsx)(Z,{children:n}),(0,s.jsxs)(O,{children:[(0,s.jsx)(R,{children:"Suggested: "}),i||(0,s.jsx)("span",{className:"loading-bar small"})]}),(0,s.jsxs)(O,{children:[(0,s.jsx)(R,{children:"GPT Suggestion: "}),r||(0,s.jsx)("span",{className:"loading-bar small"})]})]}):(0,s.jsx)(P,{onClick:t,header:n})})};G.propTypes=z,G.defaultProps={suggestion:"",chatGTP:""};let L={src:(0,d.shape)({image:d.string.isRequired,current:d.string})},D=e=>{let{src:t}=e,[n,a]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[c,l]=(0,r.useState)(null);return(0,s.jsx)(G,{src:t,onClick:function(){a(!0),y(t.image).then(async e=>{try{let t=e.tags.map(e=>e.name);t.push(e.description.captions[0].text);let n=await w(t);l(n),o(e.description.captions[0].text)}catch(s){console.log(s),a(!1)}})},alt:"",header:"Azure",fetched:n,suggestion:i,chatGTP:c})};async function E(e){try{let t=await fetch("".concat(u,"/suggestions"),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3030"),"Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e}}),n=await t.json();return n}catch(s){console.log(s)}}D.propTypes=L,D.defaultProps={src:{current:null}};let q={src:(0,d.shape)({image:d.string.isRequired,current:d.string})},I=e=>{let{src:t}=e,[n,a]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[c,l]=(0,r.useState)(null);return(0,s.jsx)(G,{src:t,onClick:function(){a(!0),E(t.image).then(async e=>{try{let t=await w(e);l(t),o(e.join(", "))}catch(n){console.log(n),a(!1)}})},alt:"",header:"Cloud Vision",fetched:n,suggestion:i,chatGTP:c})};function B(){let[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)(),[c,d]=(0,r.useState)(!1);async function p(t){t.preventDefault(),d(!0);let n=await fetch("".concat(u,"/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),s=await n.json();a(s.result),d(!1)}return(0,s.jsxs)("div",{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"OpenAI Quickstart"}),(0,s.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsxs)("form",{onSubmit:p,children:[(0,s.jsx)("img",{src:"./valtechLogo-black.png",className:l().icon}),(0,s.jsx)("input",{type:"text",name:"image url",placeholder:"Enter an url",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)("input",{type:"submit",value:"Analize URL"})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",marginTop:"20px"},children:[(0,s.jsx)("div",{style:{margin:"0 auto"},children:c&&(0,s.jsx)("div",{className:"loading-bar"})}),n&&(0,s.jsx)(o.G,{columnsCountBreakPoints:{350:1,750:2,900:3},children:(0,s.jsx)(o.Z,{gutter:"1.5rem",children:Array.isArray(n)&&n.map((e,t)=>(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)("img",{src:e.image,alt:"",style:{width:"100%"}}),(0,s.jsx)(D,{src:e}),(0,s.jsx)(I,{src:e})]},"altify-image-".concat(t)))})})]})]})]})}I.propTypes=q,I.defaultProps={src:{current:null}}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[828,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);