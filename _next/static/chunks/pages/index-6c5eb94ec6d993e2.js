(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6838)}])},6838:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var l=n(5893),i=n(9008),a=n.n(i),s=n(7294);n(2337);var r=n(4848),o=n.n(r);let c="https://altify-api.azurewebsites.net";var u=n(5697),d=n(1749),g=n(5036);let p=["ImageType","Faces","Adult","Categories","Color","Tags","Description","Objects","Brands"],h=async e=>e.filter(e=>"text"===e.name.toLowerCase()),f=async e=>e.filter(e=>"handwriting"===e.name.toLowerCase()),x=e=>new Promise(t=>{setTimeout(t,e)});async function y(e){let t=new d.FV(new g.C({inHeader:{"Ocp-Apim-Subscription-Key":"b8de935b3a0b4bafaea5fe58efc98d22"}}),"https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/"),n=await t.analyzeImage(e,{visualFeatures:p});return(h(n.tags)||f(n.tags))&&(n.text=await v(t,e)),{URL:e,...n}}let v=async(e,t)=>{let n=await e.read(t),l=n.operationLocation.split("/").slice(-1)[0],i=Date.now();for(console.log("".concat(i," -").concat(null==n?void 0:n.status," "));"succeeded"!==n.status;)await x(500),console.log("".concat(Date.now()-i," -").concat(null==n?void 0:n.status," ")),n=await e.getReadResult(l);return n.analyzeResult};async function m(e,t,n){let l=Number(n),i=await fetch("".concat(c,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json",authentication:t},body:JSON.stringify({tags:e,creativity:l})}),a=await i.json();return a.result}var j=n(3264),b=n(5513);let w=(0,j.Z)(b.Z)({color:"black",backgroundColor:"rgb(118, 248, 176)",border:"none",borderRadius:4,textAlign:"center",cursor:"pointer",width:"100%",height:40,padding:"0 20px",textTransform:"none",fontSize:16,"&:hover":{backgroundColor:"rgb(118, 248, 176)",border:"none"}}),T={onClick:u.func.isRequired,header:u.string.isRequired,loading:u.bool.isRequired},C=e=>{let{onClick:t,header:n,loading:i}=e;return(0,l.jsxs)(w,{loading:i,variant:"outlined",onClick:t,children:["Generate Tag ",n]})};C.propTypes=T,C.defaultProps={loading:!1};var S=n(7297),P=n(186);function _(){let e=(0,S.Z)(["\n  display: flex;\n  marginTop: 5;\n  width: 100%;\n"]);return _=function(){return e},e}function R(){let e=(0,S.Z)(["\n  color: rgb(118, 248, 176);\n  margin: 0,\n  text-align: center;\n"]);return R=function(){return e},e}let k=P.ZP.div(_());P.ZP.h2(R()),(0,j.Z)("div")({});let L={onClick:u.func.isRequired,header:u.string.isRequired,suggestion:u.string,chatGTP:u.string,loading:u.bool.isRequired},Z=e=>{let{onClick:t,header:n,suggestion:i,chatGTP:a,loading:s}=e;return(0,l.jsx)(k,{children:(0,l.jsxs)("div",{style:{flex:1},children:[(0,l.jsxs)("div",{style:{display:"flex",flex:1},children:[(0,l.jsx)("div",{style:{flex:2},children:(0,l.jsx)(C,{onClick:t,header:n,loading:s})}),(0,l.jsx)("div",{style:{flex:2},children:(0,l.jsxs)("p",{style:{fontWeight:"bold",marginTop:0,marginBottom:50,marginLeft:20},children:[n," Tag:\xa0"]})}),(0,l.jsx)("div",{style:{flex:3,marginLeft:-80},children:(0,l.jsx)("div",{style:{flex:5},children:i&&(0,l.jsx)("p",{style:{marginTop:0},children:i})})})]}),(0,l.jsxs)("div",{style:{flex:1,display:"flex"},children:[(0,l.jsx)("div",{style:{flex:2}}),(0,l.jsx)("div",{style:{flex:2},children:(0,l.jsx)("div",{children:(0,l.jsx)("p",{style:{fontWeight:"bold",marginLeft:20,marginTop:0},children:"GPT Tag:\xa0"})})}),(0,l.jsx)("div",{style:{flex:3,marginLeft:-80},children:(0,l.jsx)("div",{style:{minHeight:150,maxHeight:150,overflowY:"auto"},children:a&&(0,l.jsx)("p",{style:{marginTop:0},children:a})})})]})]})})};Z.propTypes=L,Z.defaultProps={suggestion:null,chatGTP:null};let A={src:(0,u.shape)({image:u.string.isRequired,current:u.string})},q=e=>{let{src:t,password:n,creativity:i}=e,[a,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[g,p]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[x,v]=(0,s.useState)(null),[j,b]=(0,s.useState)(null);async function w(e){if(0==i&&g){b(g);return}if(.5==i&&h){b(h);return}if(1==i&&x){b(x);return}b(null),r(!0);let t=await m(e,n,i);0==i&&p(t),.5==i&&f(t),1==i&&v(t),b(t),r(!1)}return(0,s.useEffect)(()=>{r(!1),d(null),b(null)},[t]),(0,s.useEffect)(()=>{u&&w(o)},[i]),(0,l.jsx)(Z,{src:t,onClick:function(){r(!0),y(t.image).then(e=>{try{let t=e.tags.map(e=>e.name);t.push(e.description.captions[0].text),d(e.description.captions[0].text),c(t),w(t)}catch(n){console.log(n)}finally{}})},alt:"",header:"Azure",suggestion:u,chatGTP:j,loading:a})};async function N(e,t){try{let n=await fetch("".concat(c,"/suggestions"),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e,authentication:t}}),l=await n.json();return l}catch(i){console.log(i)}}q.propTypes=A,q.defaultProps={src:{current:null}};let E={src:(0,u.shape)({image:u.string.isRequired,current:u.string}),password:u.string},O=e=>{let{src:t,password:n,creativity:i}=e,[a,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[g,p]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[x,y]=(0,s.useState)(null),[v,j]=(0,s.useState)(null);async function b(e){if(0==i&&g){j(g);return}if(.5==i&&h){j(h);return}if(1==i&&x){j(x);return}j(null),r(!0);let t=await m(e,n,i);0==i&&p(t),.5==i&&f(t),1==i&&y(t),j(t),r(!1)}return(0,s.useEffect)(()=>{r(!1),d(null),j(null)},[t]),(0,s.useEffect)(()=>{u&&b(o)},[i]),console.log("loading: ",a),(0,l.jsx)(Z,{src:t,onClick:function(){r(!0),N(t.image,n).then(e=>{try{d(e.join(", ")),c(e),b(e)}catch(t){console.log(t)}finally{}})},alt:"",header:"Cloud Vision",suggestion:u,chatGTP:v,loading:a})};O.propTypes=E,O.defaultProps={src:{current:null},password:null};let z={name:u.string,onChange:u.func,placeholder:u.string,type:u.string,value:u.string,disabled:u.bool},G=e=>{let{name:t,onChange:n,placeholder:i,type:a,value:s,disabled:r}=e;return(0,l.jsx)("input",{type:a,disabled:r,name:t,placeholder:i,value:s,onChange:n})};G.propTypes=z,G.defaultProps={name:"",onChange(){},placeholder:"",type:"text",value:"",disabled:!1};var I=n(629);let D=(0,j.Z)(I.Z)({display:"flex",marginTop:50}),W=(0,j.Z)("div")({margin:"auto",flex:1,padding:20}),H=(0,j.Z)("div")({flex:3,marginLeft:20,display:"flex",flexDirection:"column"}),B=(0,j.Z)("div")({display:"flex",flex:1,alignItems:"center",padding:"20px"});var F=n(913),J=n(3841),M=n(3870),U=n(5819);let V={image:u.object.isRequired,password:u.string.isRequired,index:u.number.isRequired,total:u.number.isRequired},X=[{value:"0",label:"Light"},{value:"0.5",label:"Medium"},{value:"1",label:"High"}],K=e=>{let{image:t,password:n,index:i,total:a}=e,[r,o]=(0,s.useState)(0);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,l.jsxs)(D,{elevation:8,children:[(0,l.jsx)(W,{children:(0,l.jsx)("img",{src:t.image,alt:"",style:{width:"100%"}})}),(0,l.jsxs)(H,{elevation:8,children:[(0,l.jsxs)(B,{children:[(0,l.jsx)("div",{style:{display:"flex",flex:2},children:(0,l.jsxs)(F.Z,{fullWidth:!0,children:[(0,l.jsx)(J.Z,{id:"creativity-select-label",children:"GPT Creativity Level"}),(0,l.jsx)(M.Z,{labelId:"creativity-select-label",id:"creativity-select",value:r,label:"GPT Creativity Level",onChange:function(e){o(e.target.value)},children:X.map(e=>(0,l.jsx)(U.Z,{value:e.value,children:e.label},e.label))})]})}),(0,l.jsx)("div",{style:{display:"flex",flex:2,alignItems:"space-evenly"},children:(0,l.jsx)("p",{style:{fontWeight:"bold",marginLeft:20},children:"Current Alt Tag: "})}),(0,l.jsx)("div",{style:{display:"flex",flex:3,marginLeft:-80},children:(0,l.jsx)("p",{children:t.current})})]}),(0,l.jsx)(B,{children:(0,l.jsx)(q,{src:t,password:n,creativity:r})}),(0,l.jsx)(B,{children:(0,l.jsx)(O,{src:t,password:n,creativity:r})})]})]}),(0,l.jsxs)("p",{children:["#",i+1,"/",a]})]})};function Q(){let[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[r,u]=(0,s.useState)(null),[d,g]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1);async function f(t){t.preventDefault(),(null==r?void 0:r.length)>0&&u(null),g(!0);let l=await fetch("".concat(c,"/generate"),{method:"POST",headers:{"Content-Type":"application/json",authentication:n},body:JSON.stringify({url:e})});if(401===l.status){g(!1),alert("Wrong password");return}h(!0);let i=await l.json();if(0===i.result.length){g(!1),alert("No images found");return}u(i.result.filter(e=>{var t;return!(null===(t=e.src)||void 0===t?void 0:t.endsWith(".svg"))})),g(!1)}return(0,l.jsxs)("div",{children:[(0,l.jsxs)(a(),{children:[(0,l.jsx)("title",{children:"OpenAI Quickstart"}),(0,l.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,l.jsxs)("main",{className:o().main,children:[(0,l.jsxs)("form",{onSubmit:f,children:[(0,l.jsx)("img",{src:"./valtechLogo-black.png",className:o().icon}),(0,l.jsx)(G,{type:"text",name:"image url",placeholder:"Enter a url",value:e,onChange:function(e){t(e.target.value)}}),(0,l.jsx)(G,{disabled:p,type:"password",name:"password",placeholder:"Enter the password",value:n,onChange:function(e){i(e.target.value)}}),(0,l.jsx)("input",{disabled:!n||!e,type:"submit",value:"Analyze URL"})]}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",marginTop:"20px"},children:[(0,l.jsx)("div",{style:{margin:"0 auto",height:36},children:d&&(0,l.jsx)("div",{className:"loading-bar"})}),(null==r?void 0:r.length)&&(0,l.jsxs)("p",{style:{marginBottom:-20},children:["Images found: ",r.length]}),Array.isArray(r)&&r.map((e,t)=>(0,l.jsx)(K,{index:t,image:e,password:n,total:null==r?void 0:r.length},"altify-image-".concat(t)))]})]})]})}K.propTypes=V,K.defaultProps={}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[855,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);