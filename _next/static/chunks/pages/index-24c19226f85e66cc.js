(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9602)}])},9602:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eT}});var i=n(5893),l=n(9008),r=n.n(l),s=n(7294),a=n(4848),o=n.n(a);let d="https://altify-api.azurewebsites.net";var u=n(3321),c=n(657),p=n(1425),x=n(6514),h=n(4215),g=n(4776),f=n(5697),m=n(3264),y=n(8271);let j={disabled:f.bool,fullWidth:f.bool,name:f.string,onChange:f.func,placeholder:f.string,type:f.string,value:f.string,autoFocus:f.bool},b="rgb(118, 248, 176)",v=(0,m.Z)(y.Z)({"& input:valid + fieldset":{borderColor:b,borderWidth:2},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:b},"&:hover fieldset":{borderColor:b},"&.Mui-focused fieldset":{borderColor:b}},"& input:invalid + fieldset":{borderColor:"red",borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px",borderColor:b}}),w=e=>{let{name:t,onChange:n,placeholder:l,type:r,value:s,disabled:a,fullWidth:o,autoFocus:d,multiline:u,sx:c}=e;return(0,i.jsx)(v,{sx:{marginBottom:3,...c},autoFocus:d,type:r,disabled:a,name:t,placeholder:l,value:s,onChange:n,fullWidth:o,multiline:u})};w.propTypes=j,w.defaultProps={disabled:!1,fullWidth:!1,name:"",onChange(){},placeholder:"",type:"text",value:"",autoFocus:!1};let C=(0,m.Z)(u.Z)({color:"rgb(118, 248, 176)",fontWeight:"bold",letterSpacing:"1px"}),S=(0,s.forwardRef)(function(e,t){return(0,i.jsx)(g.Z,{direction:"down",ref:t,...e})}),Z={setCorrectPassword:f.func.isRequired,handlePasswordChange:f.func.isRequired,password:f.string.isRequired},T=e=>{let{setCorrectPassword:t,handlePasswordChange:n,password:l}=e,[r,a]=(0,s.useState)(!0);async function o(e){if(e.preventDefault(),l)try{let n=await fetch("".concat(d,"/verifyPassword"),{method:"GET",headers:{"Content-Type":"application/json",authentication:l}});if(401===n.status){alert("Incorrect password");return}if(200===n.status){t(!0),a(!1);return}}catch(i){console.log("error: ",i)}}return(0,i.jsxs)(c.Z,{open:r,TransitionComponent:S,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[(0,i.jsx)(h.Z,{children:"Please enter the password"}),(0,i.jsx)(x.Z,{children:(0,i.jsx)("form",{onSubmit:o,children:(0,i.jsx)(w,{autoFocus:!0,type:"password",fullWidth:!0,value:l,onChange:n})})}),(0,i.jsx)(p.Z,{children:(0,i.jsx)(C,{onClick:o,children:"Enter"})})]})};T.propTypes=Z;var P=n(1749),k=n(5036);let R=["ImageType","Faces","Adult","Categories","Color","Tags","Description","Objects","Brands"],E=async e=>e.filter(e=>"text"===e.name.toLowerCase()),_=async e=>e.filter(e=>"handwriting"===e.name.toLowerCase()),I=e=>new Promise(t=>{setTimeout(t,e)});async function A(e){let t=new P.FV(new k.C({inHeader:{"Ocp-Apim-Subscription-Key":"b8de935b3a0b4bafaea5fe58efc98d22"}}),"https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/");try{let n=await t.analyzeImage(e,{visualFeatures:R});return(E(n.tags)||_(n.tags))&&(n.text=await W(t,e)),{URL:e,...n}}catch(i){throw console.log("Error:",i),Error(i)}}let W=async(e,t)=>{let n=await e.read(t),i=n.operationLocation.split("/").slice(-1)[0],l=Date.now();for(console.log("".concat(l," -").concat(null==n?void 0:n.status," "));"succeeded"!==n.status;)await I(500),console.log("".concat(Date.now()-l," -").concat(null==n?void 0:n.status," ")),n=await e.getReadResult(i);return n.analyzeResult};async function D(e,t,n){let i=Number(n),l=await fetch("".concat(d,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json",authentication:t},body:JSON.stringify({tags:e,creativity:i})}),r=await l.json();return r.result}var M=n(7957),O=n(594),F=n(7036),L=n(7297),N=n(186);function q(){let e=(0,L.Z)(["\n  display: flex;\n  margin-top: 5;\n  width: 100%;\n"]);return q=function(){return e},e}function z(){let e=(0,L.Z)(["\n  color: rgb(118, 248, 176);\n  margin: 0,\n  text-align: center;\n"]);return z=function(){return e},e}function G(){let e=(0,L.Z)(["\n  font-weight: bold;\n  padding: 0 0 20px 0;\n"]);return G=function(){return e},e}function B(){let e=(0,L.Z)(["\n  cursor: pointer;\n"]);return B=function(){return e},e}function V(){let e=(0,L.Z)(["\n  display: flex;\n"]);return V=function(){return e},e}function H(){let e=(0,L.Z)(["\n  margin: 0;\n  font-size: 12px;\n  position: relative;\n  bottom: 8px;\n"]);return H=function(){return e},e}let U=N.ZP.div(q());N.ZP.h2(z());let J=N.ZP.div(G()),X=N.ZP.div(B()),K=N.ZP.div(V()),Y=N.ZP.div(H()),Q={chatGTP:f.string,header:f.string.isRequired,loading:f.bool,onClick:f.func.isRequired,suggestion:f.string,unsupported:f.bool},$=e=>{let{onClick:t,header:n,suggestion:l,chatGTP:r,loading:a,unsupported:o}=e,[d,u]=(0,s.useState)(!1),[c,p]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1),m=()=>u(e=>!e),y=e=>p(e.target.value),j=()=>f(e=>!e);return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)(eZ,{toggleShowAlert:j,title:"Saved to CMS",buttonText:"Close"}),(0,i.jsx)(U,{children:(0,i.jsx)("div",{style:{flex:1},children:(0,i.jsxs)("div",{style:{flex:1,display:"flex"},children:[(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)(J,{children:n}),(0,i.jsx)(es,{disabled:o,onClick(e){h(null),p(null),t(e)},header:"Generate Tags",loading:a,sx:{marginBottom:"20px",width:"180px"}}),r&&!a&&(0,i.jsx)(es,{secondary:!0,exact:"true",onClick:j,header:"Save to CMS",sx:{width:"180px"}}),o&&(0,i.jsx)("div",{style:{color:"red",display:"flex",alignItems:"center",flexDirection:"column"},children:(0,i.jsx)("p",{style:{fontSize:12,margin:0},children:"Unsupported format: .GIF"})})]}),(0,i.jsxs)("div",{style:{flex:2,flexDirection:"column",display:"flex",paddingLeft:"40px"},children:[(0,i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,i.jsx)(J,{children:"Image Detections"}),l&&(0,i.jsx)("div",{style:{margin:"0 0 20px 0"},children:l})]}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{children:"GPT Tag"}),a?(0,i.jsx)("div",{style:{height:36},children:(0,i.jsx)("div",{className:"loading-bar"})}):(0,i.jsxs)("div",{style:{flex:2,alignItems:"center",display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"0"},children:[d?(0,i.jsx)(w,{name:"chatGPT tags",placeholder:"Enter a description",multiline:!0,value:c||x||r,onChange:y,fullWidth:!0,sx:{background:"white"}}):(0,i.jsx)("p",{style:{padding:0,margin:0},children:null!=x?x:r}),(0,i.jsx)(X,{children:d?(0,i.jsxs)(K,{children:[(0,i.jsx)(F.Z,{sx:{margin:"2px 8px"},onClick(e){m(e),h(c)}}),(0,i.jsx)(O.Z,{sx:{margin:"2px 8px"},onClick(e){m(e),p(null)}})]}):(0,i.jsxs)("div",{onClick(e){m(e)},children:[(0,i.jsx)(M.Z,{sx:{margin:"2px 8px"}}),x&&(0,i.jsx)(Y,{children:"Edited"})]})})]})]})]})]})})})]})};$.propTypes=Q,$.defaultProps={chatGTP:null,loading:!1,suggestion:null,unsupported:!1};let ee={src:(0,f.shape)({image:f.string.isRequired,current:f.string})},et=e=>{let{src:t,password:n,creativity:l}=e,[r,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[u,c]=(0,s.useState)(null),[p,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[f,m]=(0,s.useState)(null),[y,j]=(0,s.useState)(null);async function b(e){j(null),a(!0);let t=await D(e,n,l);0==l&&x(t),.5==l&&g(t),1==l&&m(t),j(t.trim()),a(!1)}return(0,s.useEffect)(()=>{a(!1),c(null),j(null)},[t]),(0,s.useEffect)(()=>{u&&b(o)},[l]),(0,i.jsx)($,{onClick:function(){a(!0),j(null),A(t.image).then(e=>{try{let t=e.tags.map(e=>e.name);t.push(e.description.captions[0].text),c(e.description.captions[0].text),d(t),b(t)}catch(n){a(!1),alert(n.message)}}).catch(e=>{a(!1),alert(e.message)})},alt:"",header:"Azure Computer Vision",suggestion:u,chatGTP:y,loading:r,unsupported:t.image.endsWith(".gif")})};et.propTypes=ee,et.defaultProps={src:{current:null}};var en=n(8987);let ei=(0,m.Z)(en.Z)(e=>{let{secondary:t}=e;return{color:t?"#fff":"#000",backgroundColor:t?"#000":"rgb(118, 248, 176)",border:"none",borderRadius:4,height:60,textAlign:"center",cursor:"pointer",width:"100%",padding:"0 20px",textTransform:"none",fontSize:16,"&:hover":{backgroundColor:t?"#6B6B6B":"rgb(118, 248, 176)",border:"none"},"&:disabled":{cursor:"not-allowed",pointerEvents:"all !important"}}}),el={onClick:f.func.isRequired,header:f.string.isRequired,loading:f.bool,disabled:f.bool},er=e=>{let{onClick:t,header:n,loading:l,disabled:r,secondary:s=!1,sx:a}=e;return(0,i.jsx)(ei,{loading:l,variant:"outlined",onClick:t,disabled:r,secondary:s,sx:a,children:n})};er.propTypes=el,er.defaultProps={loading:!1,disabled:!1};var es=er;async function ea(e,t){try{let n=await fetch("".concat(d,"/suggestions"),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e,authentication:t}}),i=await n.json();return i}catch(l){console.log(l)}}let eo={src:(0,f.shape)({image:f.string.isRequired,current:f.string}),password:f.string},ed=e=>{let{src:t,password:n,creativity:l}=e,[r,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[u,c]=(0,s.useState)(null),[p,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[f,m]=(0,s.useState)(null),[y,j]=(0,s.useState)(null);async function b(e){j(null),a(!0);let t=await D(e,n,l);0==l&&x(t),.5==l&&g(t),1==l&&m(t),j(t.trim()),a(!1)}return(0,s.useEffect)(()=>{a(!1),c(null),j(null)},[t]),(0,s.useEffect)(()=>{u&&b(o)},[l]),(0,i.jsx)($,{onClick:function(){a(!0),ea(t.image,n).then(e=>{if(e.length>0)try{c(e.join(", ")),d(e),b(e)}catch(t){console.log(t)}else a(!1),alert("No tags were detected.")})},alt:"",header:"Google Cloud Vision",suggestion:u,chatGTP:y,loading:r})};ed.propTypes=eo,ed.defaultProps={src:{current:null},password:null};var eu=n(629);let ec=(0,m.Z)(eu.Z)({display:"flex",marginTop:50,boxShadow:"none",background:"#F7F7F7",border:"1px solid #909EB0"}),ep=(0,m.Z)("div")({margin:0,flex:1,padding:20,display:"flex",flexDirection:"column",justifyContent:"flex-start"}),ex=(0,m.Z)("div")({flex:3,marginLeft:20,display:"flex",flexDirection:"column",borderLeft:"1px solid #909EB0"}),eh=(0,m.Z)("div")({borderTop:"1px solid #909EB0",display:"flex",flex:1,alignItems:"flex-start",padding:"20px","&:nth-of-type(1)":{borderTop:"none"}}),eg=(0,m.Z)("div")({fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",padding:"0 0 20px 0",margin:0}),ef={fontSize:18,height:"60px",color:"black",".MuiOutlinedInput-notchedOutline":{borderColor:"rgb(118, 248, 176)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"rgb(118, 248, 176)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgb(118, 248, 176)"},".MuiSvgIcon-root ":{fill:"black !important"}};var em=n(4054),ey=n(3246),ej=n(5819);let eb={image:f.object.isRequired,password:f.string.isRequired,index:f.number.isRequired,total:f.number.isRequired},ev=[{value:"0",label:"Light"},{value:"0.5",label:"Medium"},{value:"1",label:"High"}],ew=e=>{let{image:t,password:n,index:l,total:r}=e,[a,o]=(0,s.useState)(0);return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,i.jsxs)(ec,{elevation:8,children:[(0,i.jsxs)(ep,{children:[(0,i.jsxs)("div",{style:{margin:"0 0 20px 0",fontWeight:"bold"},children:["Image ",l+1]}),(0,i.jsx)("img",{src:t.image,alt:"You ought to add an alt tag !",style:{width:"100%",borderRadius:"6px"}}),(0,i.jsx)("p",{style:{visibility:"hidden",height:"20px",margin:"20px 0 0 0"},children:"3"})]}),(0,i.jsxs)(ex,{elevation:8,children:[(0,i.jsxs)(eh,{children:[(0,i.jsxs)("div",{style:{display:"flex",flex:"1 1 0%",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},children:[(0,i.jsx)(eg,{children:"GPT Creativity Level"}),(0,i.jsx)(em.Z,{sx:{width:120},children:(0,i.jsx)(ey.Z,{labelId:"creativity-select-label",id:"creativity-select",value:a,onChange:function(e){o(e.target.value)},sx:ef,children:ev.map(e=>(0,i.jsx)(ej.Z,{value:e.value,children:e.label},e.label))})})]}),(0,i.jsxs)("div",{style:{display:"flex",flex:"2 1 0%",flexDirection:"column",paddingLeft:"40px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",minWidth:200,padding:"0 0 20px 0",margin:0},children:"Current Alt Tag"}),(0,i.jsx)("div",{style:{padding:0},children:t.current})]})]}),(0,i.jsx)(eh,{children:(0,i.jsx)(et,{src:t,password:n,creativity:a})}),(0,i.jsx)(eh,{children:(0,i.jsx)(ed,{src:t,password:n,creativity:a})})]})]})})};ew.propTypes=eb,ew.defaultProps={};let eC=(0,s.forwardRef)(function(e,t){return(0,i.jsx)(g.Z,{direction:"down",ref:t,...e})}),eS=e=>{let{toggleShowAlert:t,title:n,buttonText:l}=e;return(0,i.jsxs)(c.Z,{open:open,TransitionComponent:eC,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{padding:"20px"}}},children:[(0,i.jsx)(h.Z,{children:n}),(0,i.jsx)(p.Z,{children:(0,i.jsx)(es,{onClick:t,header:l})})]})};var eZ=eS;function eT(){let[e,t]=(0,s.useState)(""),[n,l]=(0,s.useState)(""),[a,u]=(0,s.useState)(null),[c,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),m=()=>f(e=>!e);async function y(i){let l;i.preventDefault(),(null==a?void 0:a.length)>0&&u(null),(l=e.startsWith("www")?"https://".concat(e):e.startsWith("https://")?e:"https://".concat(e))!==e&&t(l),p(!0);let r=await fetch("".concat(d,"/generate"),{method:"POST",headers:{"Content-Type":"application/json",authentication:n},body:JSON.stringify({url:l})});if(401===r.status){p(!1),alert("Wrong password");return}h(!0);let s=await r.json();if(0===s.result.length){p(!1),alert("No image tags found");return}u(s.result),p(!1)}return x?(console.log("result",a),(0,i.jsxs)("div",{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{children:"Altify - Valtech Future Studio"}),(0,i.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,i.jsxs)("main",{className:o().main,children:[g&&(0,i.jsx)(eZ,{toggleShowAlert:m,title:"Export Completed",buttonText:"Close"}),(0,i.jsxs)("form",{onSubmit:y,children:[(0,i.jsx)("img",{src:"./valtechLogo-black.png",className:o().icon}),(0,i.jsx)(w,{autoFocus:!0,type:"text",name:"image url",placeholder:"Enter a url",value:e,onChange:function(e){t(e.target.value)},fullWidth:!0}),(0,i.jsx)("input",{disabled:!e,type:"submit",value:"Analyze URL",style:{width:320,height:"60px"}})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",margin:"24px 0 80px"},children:[(0,i.jsx)("div",{style:{margin:"0 auto",height:36},children:c&&(0,i.jsx)("div",{className:"loading-bar"})}),(null==a?void 0:a.length)&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)("p",{style:{marginBottom:-20},children:[a.length," Images Detected"]}),(0,i.jsx)(es,{secondary:!0,exact:"true",onClick:m,header:"Export to CMS",sx:{width:"180px"}})]}),Array.isArray(a)&&a.map((e,t)=>(0,i.jsx)(ew,{index:t,image:e,password:n,total:null==a?void 0:a.length},"altify-image-".concat(t)))]})]})]})):(0,i.jsx)(T,{autoFocus:!0,setCorrectPassword:h,handlePasswordChange:function(e){l(e.target.value)},password:n})}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[474,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);