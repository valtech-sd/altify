(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6838)}])},6838:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var l=n(5893),i=n(9008),a=n.n(i),s=n(7294);n(2337);var r=n(4848),o=n.n(r);let d="https://altify-api.azurewebsites.net";var c=n(5697),u=n(1749),p=n(5036);let g=["ImageType","Faces","Adult","Categories","Color","Tags","Description","Objects","Brands"],f=async e=>e.filter(e=>"text"===e.name.toLowerCase()),h=async e=>e.filter(e=>"handwriting"===e.name.toLowerCase()),x=e=>new Promise(t=>{setTimeout(t,e)});async function y(e){let t=new u.FV(new p.C({inHeader:{"Ocp-Apim-Subscription-Key":"b8de935b3a0b4bafaea5fe58efc98d22"}}),"https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/"),n=await t.analyzeImage(e,{visualFeatures:g});return(f(n.tags)||h(n.tags))&&(n.text=await m(t,e)),{URL:e,...n}}let m=async(e,t)=>{let n=await e.read(t),l=n.operationLocation.split("/").slice(-1)[0],i=Date.now();for(console.log("".concat(i," -").concat(null==n?void 0:n.status," "));"succeeded"!==n.status;)await x(500),console.log("".concat(Date.now()-i," -").concat(null==n?void 0:n.status," ")),n=await e.getReadResult(l);return n.analyzeResult};async function v(e,t,n){let l=Number(n),i=await fetch("".concat(d,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json",authentication:t},body:JSON.stringify({tags:e,creativity:l})}),a=await i.json();return a.result}var j=n(3264),b=n(5513);let w=(0,j.Z)(b.Z)({color:"black",backgroundColor:"rgb(118, 248, 176)",border:"none",borderRadius:4,textAlign:"center",cursor:"pointer",width:"100%",height:40,padding:"0 20px",textTransform:"none",fontSize:16,"&:hover":{backgroundColor:"rgb(118, 248, 176)",border:"none"},"&:disabled":{cursor:"not-allowed",pointerEvents:"all !important"}}),T={onClick:c.func.isRequired,header:c.string.isRequired,loading:c.bool,disabled:c.bool},C=e=>{let{onClick:t,header:n,loading:i,disabled:a}=e;return(0,l.jsxs)(w,{loading:i,variant:"outlined",onClick:t,disabled:a,children:["Generate Tag ",n]})};C.propTypes=T,C.defaultProps={loading:!1,disabled:!1};var S=n(7297),P=n(186);function _(){let e=(0,S.Z)(["\n  display: flex;\n  marginTop: 5;\n  width: 100%;\n"]);return _=function(){return e},e}function k(){let e=(0,S.Z)(["\n  color: rgb(118, 248, 176);\n  margin: 0,\n  text-align: center;\n"]);return k=function(){return e},e}let L=P.ZP.div(_());P.ZP.h2(k()),(0,j.Z)("div")({});let R={chatGTP:c.string,header:c.string.isRequired,loading:c.bool,onClick:c.func.isRequired,suggestion:c.string,unsupported:c.bool},Z=e=>{let{onClick:t,header:n,suggestion:i,chatGTP:a,loading:s,unsupported:r}=e;return(0,l.jsx)(L,{children:(0,l.jsxs)("div",{style:{flex:1},children:[(0,l.jsxs)("div",{style:{display:"flex",flex:1},children:[(0,l.jsxs)("div",{style:{flex:2},children:[(0,l.jsx)(C,{disabled:r,onClick:t,header:n,loading:s}),r&&(0,l.jsx)("div",{style:{color:"red",display:"flex",alignItems:"center",flexDirection:"column"},children:(0,l.jsx)("p",{style:{fontSize:12,margin:0},children:"Unsupported format: .GIF"})})]}),(0,l.jsx)("div",{style:{flex:2},children:(0,l.jsxs)("p",{style:{fontWeight:"bold",marginTop:0,marginBottom:50,marginLeft:20},children:[n," Tag:\xa0"]})}),(0,l.jsx)("div",{style:{flex:3,marginLeft:-80},children:(0,l.jsx)("div",{style:{flex:5},children:i&&(0,l.jsx)("p",{style:{marginTop:0},children:i})})})]}),(0,l.jsxs)("div",{style:{flex:1,display:"flex"},children:[(0,l.jsx)("div",{style:{flex:2}}),(0,l.jsx)("div",{style:{flex:2},children:(0,l.jsx)("div",{children:(0,l.jsx)("p",{style:{fontWeight:"bold",marginLeft:20,marginTop:0},children:"GPT Tag:\xa0"})})}),(0,l.jsx)("div",{style:{flex:3,marginLeft:-80},children:(0,l.jsx)("div",{style:{minHeight:150,maxHeight:150,overflowY:"auto"},children:a&&(0,l.jsx)("p",{style:{marginTop:0},children:a})})})]})]})})};Z.propTypes=R,Z.defaultProps={chatGTP:null,loading:!1,suggestion:null,unsupported:!1};let A={src:(0,c.shape)({image:c.string.isRequired,current:c.string})},E=e=>{let{src:t,password:n,creativity:i}=e,[a,r]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[f,h]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),[j,b]=(0,s.useState)(null);async function w(e){if(0==i&&p){b(p);return}if(.5==i&&f){b(f);return}if(1==i&&x){b(x);return}b(null),r(!0);let t=await v(e,n,i);0==i&&g(t),.5==i&&h(t),1==i&&m(t),b(t),r(!1)}return(0,s.useEffect)(()=>{r(!1),u(null),b(null)},[t]),(0,s.useEffect)(()=>{c&&w(o)},[i]),(0,l.jsx)(Z,{onClick:function(){r(!0),y(t.image).then(e=>{try{let t=e.tags.map(e=>e.name);t.push(e.description.captions[0].text),u(e.description.captions[0].text),d(t),w(t)}catch(n){console.log(n)}finally{}})},alt:"",header:"Azure",suggestion:c,chatGTP:j,loading:a,unsupported:t.image.endsWith(".gif")})};async function N(e,t){try{let n=await fetch("".concat(d,"/suggestions"),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e,authentication:t}}),l=await n.json();return l}catch(i){console.log(i)}}E.propTypes=A,E.defaultProps={src:{current:null}};let q={src:(0,c.shape)({image:c.string.isRequired,current:c.string}),password:c.string},I=e=>{let{src:t,password:n,creativity:i}=e,[a,r]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[f,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(null),[m,j]=(0,s.useState)(null);async function b(e){if(0==i&&p){j(p);return}if(.5==i&&f){j(f);return}if(1==i&&x){j(x);return}j(null),r(!0);let t=await v(e,n,i);0==i&&g(t),.5==i&&h(t),1==i&&y(t),j(t),r(!1)}return(0,s.useEffect)(()=>{r(!1),u(null),j(null)},[t]),(0,s.useEffect)(()=>{c&&b(o)},[i]),(0,l.jsx)(Z,{onClick:function(){r(!0),N(t.image,n).then(e=>{try{u(e.join(", ")),d(e),b(e)}catch(t){console.log(t)}finally{}})},alt:"",header:"Cloud Vision",suggestion:c,chatGTP:m,loading:a})};I.propTypes=q,I.defaultProps={src:{current:null},password:null};let O={name:c.string,onChange:c.func,placeholder:c.string,type:c.string,value:c.string,disabled:c.bool},z=e=>{let{name:t,onChange:n,placeholder:i,type:a,value:s,disabled:r}=e;return(0,l.jsx)("input",{type:a,disabled:r,name:t,placeholder:i,value:s,onChange:n})};z.propTypes=O,z.defaultProps={name:"",onChange(){},placeholder:"",type:"text",value:"",disabled:!1};var G=n(629);let D=(0,j.Z)(G.Z)({display:"flex",marginTop:50}),W=(0,j.Z)("div")({margin:"auto",flex:1,padding:20}),H=(0,j.Z)("div")({flex:3,marginLeft:20,display:"flex",flexDirection:"column"}),B=(0,j.Z)("div")({display:"flex",flex:1,alignItems:"center",padding:"20px"});var F=n(913),U=n(3841),J=n(3870),M=n(5819);let V={image:c.object.isRequired,password:c.string.isRequired,index:c.number.isRequired,total:c.number.isRequired},X=[{value:"0",label:"Light"},{value:"0.5",label:"Medium"},{value:"1",label:"High"}],K=e=>{let{image:t,password:n,index:i,total:a}=e,[r,o]=(0,s.useState)(0);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,l.jsxs)(D,{elevation:8,children:[(0,l.jsx)(W,{children:(0,l.jsx)("img",{src:t.image,alt:"",style:{width:"100%"}})}),(0,l.jsxs)(H,{elevation:8,children:[(0,l.jsxs)(B,{children:[(0,l.jsx)("div",{style:{display:"flex",flex:2},children:(0,l.jsxs)(F.Z,{fullWidth:!0,children:[(0,l.jsx)(U.Z,{id:"creativity-select-label",children:"GPT Creativity Level"}),(0,l.jsx)(J.Z,{labelId:"creativity-select-label",id:"creativity-select",value:r,label:"GPT Creativity Level",onChange:function(e){o(e.target.value)},children:X.map(e=>(0,l.jsx)(M.Z,{value:e.value,children:e.label},e.label))})]})}),(0,l.jsx)("div",{style:{display:"flex",flex:2,alignItems:"space-evenly"},children:(0,l.jsx)("p",{style:{fontWeight:"bold",marginLeft:20},children:"Current Alt Tag: "})}),(0,l.jsx)("div",{style:{display:"flex",flex:3,marginLeft:-80},children:(0,l.jsx)("p",{children:t.current})})]}),(0,l.jsx)(B,{children:(0,l.jsx)(E,{src:t,password:n,creativity:r})}),(0,l.jsx)(B,{children:(0,l.jsx)(I,{src:t,password:n,creativity:r})})]})]}),(0,l.jsxs)("p",{children:["#",i+1,"/",a]})]})};function Q(){let[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[r,c]=(0,s.useState)(null),[u,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1);async function h(t){t.preventDefault(),(null==r?void 0:r.length)>0&&c(null),p(!0);let l=await fetch("".concat(d,"/generate"),{method:"POST",headers:{"Content-Type":"application/json",authentication:n},body:JSON.stringify({url:e})});if(401===l.status){p(!1),alert("Wrong password");return}f(!0);let i=await l.json();if(0===i.result.length){p(!1),alert("No images found");return}c(i.result.filter(e=>{var t;return!(null===(t=e.src)||void 0===t?void 0:t.endsWith(".svg"))})),p(!1)}return(0,l.jsxs)("div",{children:[(0,l.jsxs)(a(),{children:[(0,l.jsx)("title",{children:"OpenAI Quickstart"}),(0,l.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,l.jsxs)("main",{className:o().main,children:[(0,l.jsxs)("form",{onSubmit:h,children:[(0,l.jsx)("img",{src:"./valtechLogo-black.png",className:o().icon}),(0,l.jsx)(z,{type:"text",name:"image url",placeholder:"Enter a url",value:e,onChange:function(e){t(e.target.value)}}),(0,l.jsx)(z,{disabled:g,type:"password",name:"password",placeholder:"Enter the password",value:n,onChange:function(e){i(e.target.value)}}),(0,l.jsx)("input",{disabled:!n||!e,type:"submit",value:"Analyze URL"})]}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",marginTop:"20px"},children:[(0,l.jsx)("div",{style:{margin:"0 auto",height:36},children:u&&(0,l.jsx)("div",{className:"loading-bar"})}),(null==r?void 0:r.length)&&(0,l.jsxs)("p",{style:{marginBottom:-20},children:["Images found: ",r.length]}),Array.isArray(r)&&r.map((e,t)=>(0,l.jsx)(K,{index:t,image:e,password:n,total:null==r?void 0:r.length},"altify-image-".concat(t)))]})]})]})}K.propTypes=V,K.defaultProps={}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[855,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);