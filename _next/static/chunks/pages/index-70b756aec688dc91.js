(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4944)}])},4944:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e_}});var i=n(5893),r=n(9008),l=n.n(r),s=n(7294),a=n(4848),o=n.n(a);let d="https://altify-api.azurewebsites.net";var c=n(391),u=n(3321),p=n(657),g=n(1425),h=n(6514),f=n(4215),x=n(4776),m=n(5697),y=n(3264),v=n(8271);let j={disabled:m.bool,fullWidth:m.bool,name:m.string,onChange:m.func,placeholder:m.string,type:m.string,value:m.string,autoFocus:m.bool},b="rgb(118, 248, 176)",w=(0,y.Z)(v.Z)({"& input:valid + fieldset":{borderColor:b,borderWidth:2},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:b},"&:hover fieldset":{borderColor:b},"&.Mui-focused fieldset":{borderColor:b}},"& input:invalid + fieldset":{borderColor:"red",borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px",borderColor:b}}),C=e=>{let{name:t,onChange:n,placeholder:r,type:l,value:s,disabled:a,fullWidth:o,autoFocus:d,multiline:c,sx:u}=e;return(0,i.jsx)(w,{sx:{marginBottom:3,...u},autoFocus:d,type:l,disabled:a,name:t,placeholder:r,value:s,onChange:n,fullWidth:o,multiline:c})};C.propTypes=j,C.defaultProps={disabled:!1,fullWidth:!1,name:"",onChange(){},placeholder:"",type:"text",value:"",autoFocus:!1};let S=(0,y.Z)(u.Z)({color:"#000",fontWeight:"bold",letterSpacing:"1px"}),T=(0,s.forwardRef)(function(e,t){return(0,i.jsx)(x.Z,{direction:"down",ref:t,...e})}),P={setCorrectPassword:m.func.isRequired,handlePasswordChange:m.func.isRequired,password:m.string.isRequired},Z=e=>{let{setCorrectPassword:t,handlePasswordChange:n,password:r}=e,[l,a]=(0,s.useState)(!0);async function o(e){if(e.preventDefault(),r)try{let n=await fetch("".concat(d,"/verifyPassword"),{method:"GET",headers:{"Content-Type":"application/json",authentication:r}});if(401===n.status){alert("Incorrect password");return}if(200===n.status){t(!0),a(!1);return}}catch(i){console.log("error: ",i)}}return(0,i.jsxs)(p.Z,{open:l,TransitionComponent:T,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[(0,i.jsx)(f.Z,{children:"Please enter the password"}),(0,i.jsx)(h.Z,{children:(0,i.jsx)("form",{onSubmit:o,children:(0,i.jsx)(C,{autoFocus:!0,type:"password",fullWidth:!0,value:r,onChange:n})})}),(0,i.jsx)(g.Z,{children:(0,i.jsx)(S,{onClick:o,children:"Enter"})})]})};Z.propTypes=P;var E=n(1749),k=n(5036);let I="b8de935b3a0b4bafaea5fe58efc98d22",R=["Brands","Description"];async function _(e){try{let t=await Promise.all([A(e),O(e)]),[n,i]=await Promise.all(t.map(e=>e)),{description:r,brands:l}=n,{readOCR:s,tags:a}=i;return{brands:l,tags:a,description:r,readOCR:s}}catch(o){console.error("An error occurred:",o)}}async function A(e){let t=new E.FV(new k.C({inHeader:{"Ocp-Apim-Subscription-Key":I}}),"https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/");try{if(!e||"string"!=typeof e)throw Error("Invalid URL");let n=await t.analyzeImage(e,{visualFeatures:R}),{description:i,brands:r}=n,l=i.captions.filter(e=>e.confidence>.4),s=r.filter(e=>e.confidence>.5),a=s.map(e=>e.name);return{url:e,description:l.map(e=>e.text),brands:a}}catch(o){throw console.log("Error:",o),Error(o)}}let O=async e=>{try{let t=await fetch("https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/computervision/imageanalysis:analyze?features=tags,objects,description,read,smartCrops,people&model-version=latest&language=en&api-version=2022-10-12-preview",{method:"POST",headers:{"Content-Type":"application/json","Ocp-Apim-Subscription-Key":I},body:JSON.stringify({url:e})}),n=await t.json(),i=n.readResult.pages[0].lines.map(e=>e.content.toLowerCase()),r=n.tagsResult.values.filter(e=>e.confidence>.5).map(e=>e.name.toLowerCase());return{tags:r,readOCR:i}}catch(l){throw console.log("Error:",l),Error(l)}};async function G(e,t){try{let n=await fetch("".concat(d,"/suggestions"),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e,authentication:t}}),i=await n.json();return i}catch(r){console.log(r)}}async function M(e,t,n){let i=Number(n),r=await fetch("".concat(d,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json",authentication:t},body:JSON.stringify({tags:e,creativity:i})}),l=await r.json();return l.result}var W=n(5071),D=n(7297),N=n(186);function z(){let e=(0,D.Z)(["\n  display: flex;\n  margin-top: 5;\n  width: 100%;\n"]);return z=function(){return e},e}function F(){let e=(0,D.Z)(["\n  color: rgb(118, 248, 176);\n  margin: 0,\n  text-align: center;\n"]);return F=function(){return e},e}function L(){let e=(0,D.Z)(["\n  font-weight: bold;\n  padding: 0 0 20px 0;\n"]);return L=function(){return e},e}function q(){let e=(0,D.Z)(["\n  cursor: pointer;\n"]);return q=function(){return e},e}function B(){let e=(0,D.Z)(["\n  display: flex;\n"]);return B=function(){return e},e}function U(){let e=(0,D.Z)(["\n  margin: 0;\n  font-size: 12px;\n  position: relative;\n  bottom: 8px;\n"]);return U=function(){return e},e}let H=N.ZP.div(z());N.ZP.h2(F());let J=N.ZP.div(L());N.ZP.div(q()),N.ZP.div(B()),N.ZP.div(U());var V=n(7957),$=n(594),K=n(7036);function X(){let e=(0,D.Z)(["\n  cursor: pointer;\n"]);return X=function(){return e},e}function Q(){let e=(0,D.Z)(["\n  display: flex;\n"]);return Q=function(){return e},e}function Y(){let e=(0,D.Z)(["\n  margin: 0;\n  font-size: 12px;\n  position: relative;\n  bottom: 8px;\n"]);return Y=function(){return e},e}let ee=N.ZP.div(X()),et=N.ZP.div(Q()),en=N.ZP.div(Y()),ei={isEditingTag:m.bool,setChatGTPEdits:m.func,chatGTPEditsSaved:m.string,toggleIsEditingTag:m.func,setChatGTPEditsSaved:m.func,chatGTPEdits:m.string},er=e=>{let{isEditingTag:t,setChatGTPEdits:n,chatGTPEditsSaved:r,toggleIsEditingTag:l,setChatGTPEditsSaved:s,chatGTPEdits:a}=e;return(0,i.jsx)(ee,{children:t?(0,i.jsxs)(et,{children:[(0,i.jsx)(K.Z,{sx:{margin:"2px 8px"},onClick(e){l(e),s(a)}}),(0,i.jsx)($.Z,{sx:{margin:"2px 8px"},onClick(e){l(e),n(null)}})]}):(0,i.jsxs)("div",{onClick(e){l(e)},children:[(0,i.jsx)(V.Z,{sx:{margin:"2px 8px"}}),r&&(0,i.jsx)(en,{children:"Edited"})]})})};er.propTypes=ei;let el={chatGTP:m.string,header:m.string.isRequired,loading:m.bool,onClick:m.func.isRequired,suggestion:m.string,unsupported:m.bool,creativity:m.string},es=e=>{let{onClick:t,header:n,suggestion:r,chatGTP:l,loading:a,unsupported:o,creativity:d}=e,[u,p]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[f,x]=(0,s.useState)(null),[m,y]=(0,s.useState)(!1),{dispatch:v}=(0,s.useContext)(c.s),j=()=>p(e=>!e),b=e=>h(e.target.value),w=()=>y(e=>!e);return(0,s.useEffect)(()=>{h(null),x(null)},[d]),(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)(eR,{toggleShowAlert:w,title:"Saved to CMS",buttonText:"Close"}),(0,i.jsx)(H,{children:(0,i.jsxs)("div",{style:{flex:1,display:"flex"},children:[(0,i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,i.jsx)(J,{children:n}),(0,i.jsx)(eg,{disabled:o,onClick(e){x(null),h(null),t(e)},header:"Analyze Image",loading:a,sx:{marginBottom:"20px",width:"180px"}}),l&&!a&&(0,i.jsx)(eg,{secondary:!0,exact:"true",onClick:w,header:"Save to CMS",sx:{width:"180px"}}),o&&(0,i.jsx)("div",{style:{color:"red",display:"flex",alignItems:"center",flexDirection:"column"},children:(0,i.jsx)("p",{style:{fontSize:12,margin:0},children:"Unsupported format: .GIF"})})]}),(0,i.jsxs)("div",{style:{flex:2,flexDirection:"column",display:"flex",paddingLeft:"40px"},children:[(0,i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,i.jsx)(J,{children:"Image Detections"}),r&&(0,i.jsx)("div",{style:{margin:"0 0 20px 0"},children:(0,i.jsx)("div",{style:{flex:2,alignItems:"center",display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"0"},children:(0,i.jsx)("p",{style:{padding:0,margin:0},children:r})})})]}),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:0},children:[(0,i.jsx)(J,{children:"GPT Tag"}),!a&&(0,i.jsx)(W.Z,{sx:{marginTop:0,position:"relative",bottom:"9px"},onChange(e){let t=e.target.checked;t?v({type:"increaseCounter"}):v({type:"decreaseCounter"})}})]}),a?(0,i.jsx)("div",{style:{height:36},children:(0,i.jsx)("div",{className:"loading-bar"})}):(0,i.jsxs)("div",{style:{flex:2,alignItems:"center",display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"0"},children:[u?(0,i.jsx)(C,{name:"chatGPT tags",placeholder:"Enter a description",multiline:!0,value:g||f||l,onChange:b,fullWidth:!0,sx:{background:"white"}}):(0,i.jsx)("p",{style:{padding:0,margin:0},children:null!=f?f:l}),(0,i.jsx)(er,{isEditingTag:u,toggleIsEditingTag:j,chatGTPEdits:g,chatGTPEditsSaved:f,setChatGTPEdits:h,setChatGTPEditsSaved:x})]})]})]})]})})]})};es.propTypes=el,es.defaultProps={chatGTP:null,loading:!1,suggestion:null,unsupported:!1};let ea={src:(0,m.shape)({image:m.string.isRequired,current:m.string})},eo=e=>{let{src:t,password:n,creativity:r}=e,[l,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),[y,v]=(0,s.useState)(null);async function j(){a(!0),v(null);try{let[e,i]=await Promise.all([_(t.image),G(t.image,n)]),r=[...e.tags,...e.description,...e.readOCR,...e.brands,...i],l=r.join(", ");0===r.length?l="No tags were detected":b(l),u(l),d(r.join(", "))}catch(s){a(!1),alert(s.message)}}async function b(e){if(0==r&&p){v(p.trim()),a(!1);return}if(.5==r&&h){v(h.trim()),a(!1);return}if(1==r&&x){a(!1),v(x.trim());return}v(null),a(!0);let t=await M(e,n,r);0==r&&g(t),.5==r&&f(t),1==r&&m(t),v(t.trim()),a(!1)}return(0,s.useEffect)(()=>{a(!1),u(null),v(null)},[t]),(0,s.useEffect)(()=>{c&&b(o)},[r]),(0,i.jsx)(es,{onClick:j,alt:"",header:"Image Analysis",suggestion:c,chatGTP:y,creativity:r,loading:l,unsupported:t.image.endsWith(".gif")})};eo.propTypes=ea,eo.defaultProps={src:{current:null}};var ed=n(8987);let ec=(0,y.Z)(ed.Z)(e=>{let{secondary:t}=e;return{color:t?"#fff":"#000",backgroundColor:t?"#000":"rgb(118, 248, 176)",border:"none",borderRadius:4,height:60,textAlign:"center",cursor:"pointer",width:"100%",padding:"0 20px",textTransform:"none",fontSize:16,"&:hover":{backgroundColor:t?"#6B6B6B":"rgb(118, 248, 176)",border:"none"},"&:disabled":{cursor:"not-allowed",pointerEvents:"all !important"}}}),eu={onClick:m.func.isRequired,header:m.string.isRequired,loading:m.bool,disabled:m.bool},ep=e=>{let{onClick:t,header:n,loading:r,disabled:l,secondary:s=!1,sx:a}=e;return(0,i.jsx)(ec,{loading:r,variant:"outlined",onClick:t,disabled:l,secondary:s.toString(),sx:a,children:n})};ep.propTypes=eu,ep.defaultProps={loading:!1,disabled:!1};var eg=ep;let eh={src:(0,m.shape)({image:m.string.isRequired,current:m.string}),password:m.string},ef=e=>{let{src:t,password:n,creativity:r}=e,[l,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),[y,v]=(0,s.useState)(null);async function j(e){if(0==r&&p){v(p.trim()),a(!1);return}if(.5==r&&h){v(h.trim()),a(!1);return}if(1==r&&x){v(x.trim()),a(!1);return}v(null),a(!0);let t=await M(e,n,r);0==r&&g(t),.5==r&&f(t),1==r&&m(t),v(t.trim()),a(!1)}return(0,s.useEffect)(()=>{a(!1),u(null),v(null)},[t]),(0,s.useEffect)(()=>{c&&j(o)},[r]),(0,i.jsx)(es,{onClick:function(){a(!0),G(t.image,n).then(e=>{if(e.length>0)try{u(e.join(", ")),d(e),j(e)}catch(t){console.log(t)}else a(!1),alert("No tags were detected.")})},alt:"",header:"Google Cloud Vision",suggestion:c,chatGTP:y,loading:l})};ef.propTypes=eh,ef.defaultProps={src:{current:null},password:null};var ex=n(629);let em=(0,y.Z)(ex.Z)({display:"flex",marginTop:50,boxShadow:"none",background:"#F7F7F7",border:"1px solid #909EB0"}),ey=(0,y.Z)("div")({margin:0,flex:1,padding:20,display:"flex",flexDirection:"column",justifyContent:"flex-start"}),ev=(0,y.Z)("div")({flex:3,marginLeft:20,display:"flex",flexDirection:"column",borderLeft:"1px solid #909EB0"}),ej=(0,y.Z)("div")({borderTop:"1px solid #909EB0",display:"flex",flex:1,alignItems:"flex-start",padding:"20px","&:nth-of-type(1)":{borderTop:"none"}}),eb=(0,y.Z)("div")({fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",padding:"0 0 20px 0",margin:0}),ew={fontSize:18,height:"60px",color:"black",".MuiOutlinedInput-notchedOutline":{borderColor:"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#000"},".MuiSvgIcon-root ":{fill:"black !important"}};var eC=n(4054),eS=n(3246),eT=n(5819);let eP={image:m.object.isRequired,password:m.string.isRequired,index:m.number.isRequired,total:m.number.isRequired},eZ=[{value:"0",label:"Light"},{value:"0.5",label:"Medium"},{value:"1",label:"High"}],eE=e=>{let{image:t,password:n,index:r,total:l}=e,[a,o]=(0,s.useState)(0);return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,i.jsxs)(em,{elevation:8,children:[(0,i.jsxs)(ey,{children:[(0,i.jsxs)("div",{style:{margin:"0 0 20px 0",fontWeight:"bold"},children:["Image ",r+1]}),(0,i.jsx)("img",{src:t.image,alt:"Broken image on source site.",style:{width:"100%",borderRadius:"6px"}}),(0,i.jsx)("p",{style:{visibility:"hidden",height:"20px",margin:"20px 0 0 0"},children:"3"})]}),(0,i.jsxs)(ev,{elevation:8,children:[(0,i.jsxs)(ej,{children:[(0,i.jsxs)("div",{style:{display:"flex",flex:"1 1 0%",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},children:[(0,i.jsx)(eb,{children:"GPT Creativity Level"}),(0,i.jsx)(eC.Z,{sx:{width:120},children:(0,i.jsx)(eS.Z,{labelId:"creativity-select-label",id:"creativity-select",value:a,onChange:function(e){o(e.target.value)},sx:ew,children:eZ.map(e=>(0,i.jsx)(eT.Z,{value:e.value,children:e.label},e.label))})})]}),(0,i.jsxs)("div",{style:{display:"flex",flex:"2 1 0%",flexDirection:"column",paddingLeft:"40px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",minWidth:200,padding:"0 0 20px 0",margin:0},children:"Current Alt Tag"}),(0,i.jsx)("div",{style:{padding:0},children:t.current})]})]}),(0,i.jsx)(ej,{children:(0,i.jsx)(eo,{src:t,password:n,creativity:a})})]})]})})};eE.propTypes=eP,eE.defaultProps={};let ek=(0,s.forwardRef)(function(e,t){return(0,i.jsx)(x.Z,{direction:"down",ref:t,...e})}),eI=e=>{let{toggleShowAlert:t,title:n,buttonText:r}=e;return(0,i.jsxs)(p.Z,{open:open,TransitionComponent:ek,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{padding:"20px"}}},children:[(0,i.jsx)(f.Z,{children:n}),(0,i.jsx)(g.Z,{children:(0,i.jsx)(eg,{onClick:t,header:r})})]})};var eR=eI;function e_(){let[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[a,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),{state:y,dispatch:v}=(0,s.useContext)(c.s),j=()=>m(e=>!e);async function b(i){let r;i.preventDefault(),v({type:"resetCounter"}),(null==a?void 0:a.length)>0&&u(null),(r=e.startsWith("www")?"https://".concat(e):e.startsWith("https://")?e:"https://".concat(e))!==e&&t(r),g(!0);let l=await fetch("".concat(d,"/generate"),{method:"POST",headers:{"Content-Type":"application/json",authentication:n},body:JSON.stringify({url:r})});if(401===l.status){g(!1),alert("Wrong password");return}f(!0);let s=await l.json();if(0===s.result.length){g(!1),alert("No image tags found");return}let o=s.result.map(e=>{let t=new URL(e.image).searchParams,n=t.get("width");if(!n||!(n<200))return e;{var i,r,l,s,a;let o=(i=e.image,l="400px",s=RegExp("([?&])"+(r="width")+"=.*?(&|$)","i"),a=-1!==i.indexOf("?")?"&":"?",i.match(s)?i.replace(s,"$1"+r+"="+l+"$2"):i+a+r+"="+l);return{...e,image:o}}});u(o),g(!1)}return h?(0,i.jsxs)("div",{children:[(0,i.jsxs)(l(),{children:[(0,i.jsx)("title",{children:"Altify - Valtech Future Studio"}),(0,i.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,i.jsxs)("main",{className:o().main,children:[x&&(0,i.jsx)(eR,{toggleShowAlert:j,title:"Exported (".concat(y.counter,") Tags to CMS"),buttonText:"Close"}),(0,i.jsxs)("form",{onSubmit:b,children:[(0,i.jsx)("img",{src:"./valtechLogo-black.png",className:o().icon,alt:"valtech logo"}),(0,i.jsx)(C,{autoFocus:!0,type:"text",name:"image url",placeholder:"Enter a url",value:e,onChange:function(e){t(e.target.value)},fullWidth:!0}),(0,i.jsx)("input",{disabled:!e,type:"submit",value:"Analyze URL",style:{width:320,height:"60px"}})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",margin:"24px 0 80px"},children:[(0,i.jsx)("div",{style:{margin:"0 auto",height:36},children:p&&(0,i.jsx)("div",{className:"loading-bar"})}),(null==a?void 0:a.length)&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)("p",{style:{marginBottom:-20},children:[a.length," Images Detected"]}),(0,i.jsx)(eg,{secondary:!0,exact:"true",onClick:j,header:0===y.counter?"Export to CMS":"Export (".concat(y.counter,") to CMS"),sx:{width:"180px"}})]}),Array.isArray(a)&&a.map((e,t)=>(0,i.jsx)(eE,{index:t,image:e,password:n,total:null==a?void 0:a.length},"altify-image-".concat(t)))]})]})]}):(0,i.jsx)(Z,{autoFocus:!0,setCorrectPassword:f,handlePasswordChange:function(e){r(e.target.value)},password:n})}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[836,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);