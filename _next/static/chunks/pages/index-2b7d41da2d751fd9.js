(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4944)}])},4944:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e_}});var i=n(5893),l=n(9008),r=n.n(l),s=n(7294),a=n(7297),o=n(186),d=n(3264);function u(){let e=(0,a.Z)(["\n  display: flex;\n  margin-top: 5;\n  width: 100%;\n"]);return u=function(){return e},e}function c(){let e=(0,a.Z)(["\n  color: rgb(118, 248, 176);\n  margin: 0,\n  text-align: center;\n"]);return c=function(){return e},e}function p(){let e=(0,a.Z)(["\n  font-weight: bold;\n  padding: 0 0 20px 0;\n"]);return p=function(){return e},e}function g(){let e=(0,a.Z)(["\n  cursor: pointer;\n"]);return g=function(){return e},e}function x(){let e=(0,a.Z)(["\n  display: flex;\n"]);return x=function(){return e},e}function f(){let e=(0,a.Z)(["\n  margin: 0;\n  font-size: 12px;\n  position: relative;\n  bottom: 8px;\n"]);return f=function(){return e},e}let h=o.ZP.div(u());o.ZP.h2(c());let m=o.ZP.div(p());o.ZP.div(g()),o.ZP.div(x()),o.ZP.div(f());let y=(0,d.Z)("div")({fontSize:"16px",fontWeight:"bold",display:"flex",padding:"0 20px 20px 0",margin:0}),v={fontSize:18,height:"60px",color:"black",".MuiOutlinedInput-notchedOutline":{borderColor:"#000"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#000"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#000"},".MuiSvgIcon-root ":{fill:"black !important"}};var j=n(4054),b=n(3246),w=n(5819),C=n(4848),S=n.n(C);let Z="https://altify-api.azurewebsites.net";var T=n(391),E=n(3321),P=n(657),k=n(1425),R=n(6514),I=n(4215),_=n(4776),A=n(5697),M=n(8271);let O={disabled:A.bool,fullWidth:A.bool,name:A.string,onChange:A.func,placeholder:A.string,type:A.string,value:A.string,autoFocus:A.bool},W="rgb(118, 248, 176)",D=(0,d.Z)(M.Z)({"& input:valid + fieldset":{borderColor:W,borderWidth:2},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:W},"&:hover fieldset":{borderColor:W},"&.Mui-focused fieldset":{borderColor:W}},"& input:invalid + fieldset":{borderColor:"red",borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px",borderColor:W}}),N=e=>{let{name:t,onChange:n,placeholder:l,type:r,value:s,disabled:a,fullWidth:o,autoFocus:d,multiline:u,sx:c}=e;return(0,i.jsx)(D,{sx:{marginBottom:3,...c},autoFocus:d,type:r,disabled:a,name:t,placeholder:l,value:s,onChange:n,fullWidth:o,multiline:u})};N.propTypes=O,N.defaultProps={disabled:!1,fullWidth:!1,name:"",onChange(){},placeholder:"",type:"text",value:"",autoFocus:!1};let F=(0,d.Z)(E.Z)({color:"#000",fontWeight:"bold",letterSpacing:"1px"}),q=(0,s.forwardRef)(function(e,t){return(0,i.jsx)(_.Z,{direction:"down",ref:t,...e})}),G={setCorrectPassword:A.func.isRequired,handlePasswordChange:A.func.isRequired,password:A.string.isRequired},z=e=>{let{setCorrectPassword:t,handlePasswordChange:n,password:l}=e,[r,a]=(0,s.useState)(!0);async function o(e){if(e.preventDefault(),l)try{let n=await fetch("".concat(Z,"/verifyPassword"),{method:"GET",headers:{"Content-Type":"application/json",authentication:l}});if(401===n.status){alert("Incorrect password");return}if(200===n.status){t(!0),a(!1);return}}catch(i){console.log("error: ",i)}}return(0,i.jsxs)(P.Z,{open:r,TransitionComponent:q,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[(0,i.jsx)(I.Z,{children:"Please enter the password"}),(0,i.jsx)(R.Z,{children:(0,i.jsx)("form",{onSubmit:o,children:(0,i.jsx)(N,{autoFocus:!0,type:"password",fullWidth:!0,value:l,onChange:n})})}),(0,i.jsx)(k.Z,{children:(0,i.jsx)(F,{onClick:o,children:"Enter"})})]})};z.propTypes=G;var L=n(1749),B=n(5036);let H="b8de935b3a0b4bafaea5fe58efc98d22",J=["Brands","Description"];async function U(e){try{let t=await Promise.all([V(e),$(e)]),[n,i]=await Promise.all(t.map(e=>e)),{description:l,brands:r}=n,{readOCR:s,tags:a}=i;return{brands:r,tags:a,description:l,readOCR:s}}catch(o){console.error("An error occurred:",o)}}async function V(e){let t=new L.FV(new B.C({inHeader:{"Ocp-Apim-Subscription-Key":H}}),"https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/");try{if(!e||"string"!=typeof e)throw Error("Invalid URL");let n=await t.analyzeImage(e,{visualFeatures:J}),{description:i,brands:l}=n,r=i.captions.filter(e=>e.confidence>.4),s=l.filter(e=>e.confidence>.5),a=s.map(e=>e.name);return{url:e,description:r.map(e=>e.text),brands:a}}catch(o){throw console.log("Error:",o),Error(o)}}let $=async e=>{try{let t=await fetch("https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/computervision/imageanalysis:analyze?features=tags,objects,description,read,smartCrops,people&model-version=latest&language=en&api-version=2022-10-12-preview",{method:"POST",headers:{"Content-Type":"application/json","Ocp-Apim-Subscription-Key":H},body:JSON.stringify({url:e})}),n=await t.json(),i=n.readResult.pages[0].lines.map(e=>e.content.toLowerCase()),l=n.tagsResult.values.filter(e=>e.confidence>.5).map(e=>e.name.toLowerCase());return{tags:l,readOCR:i}}catch(r){throw console.log("Error:",r),Error(r)}};async function K(e,t){try{let n=await fetch("".concat(Z,"/suggestions"),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e,authentication:t}}),i=await n.json();return i}catch(l){console.log(l)}}async function X(e,t,n,i){let l=Number(n);try{let r=await fetch("".concat(Z,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json",authentication:t},body:JSON.stringify({tags:e,creativity:l,gptModel:i})}),s=await r.json();return s.result}catch(a){console.error("Failed to fetch data:",a)}}var Q=n(7957),Y=n(4282),ee=n(594),et=n(7036);function en(){let e=(0,a.Z)(["\n  cursor: pointer;\n"]);return en=function(){return e},e}function ei(){let e=(0,a.Z)(["\n  display: flex;\n"]);return ei=function(){return e},e}function el(){let e=(0,a.Z)(["\n  margin: 0;\n  font-size: 12px;\n  position: relative;\n  bottom: 8px;\n"]);return el=function(){return e},e}let er=o.ZP.div(en()),es=o.ZP.div(ei()),ea=o.ZP.div(el()),eo={isEditing:A.bool,setEdits:A.func,editsSaved:A.string,toggleIsEditing:A.func,setEditsSaved:A.func,edits:A.string},ed=e=>{let{isEditing:t,setEdits:n,editsSaved:l,toggleIsEditing:r,setEditsSaved:s,edits:a,clearGPT:o}=e;return(0,i.jsx)(er,{children:t?(0,i.jsxs)(es,{children:[(0,i.jsx)(et.Z,{sx:{margin:"2px 8px"},onClick(e){r(e),s(a)}}),(0,i.jsx)(ee.Z,{sx:{margin:"2px 8px"},onClick(e){r(e),n(null)}})]}):(0,i.jsxs)("div",{onClick(e){r(e)},children:[(0,i.jsx)(Q.Z,{sx:{margin:"2px 8px"}}),l&&(0,i.jsx)(ea,{children:"Edited"}),o&&(0,i.jsx)(Y.Z,{onClick(){r(),o(),n(null),s(null)},sx:{margin:"2px 8px"}})]})})};ed.propTypes=eo;let eu={chatGTP:A.string,header:A.string.isRequired,loading:A.bool,onClick:A.func.isRequired,suggestion:A.string,unsupported:A.bool,creativity:A.string,updateDetections:A.func},ec=[{value:"0",label:"Light"},{value:"0.5",label:"Medium"},{value:"1",label:"High"}],ep=e=>{let{onClick:t,suggestion:n,chatGTP:l,loading:r,unsupported:a,creativity:o,handleChange:d,updateDetections:u,clearGPT:c}=e,[p,g]=(0,s.useState)(!1),[x,f]=(0,s.useState)(null),[C,S]=(0,s.useState)(null),[Z,T]=(0,s.useState)(!1),[E,P]=(0,s.useState)(null),[k,R]=(0,s.useState)(null),[I,_]=(0,s.useState)(!1),A=()=>g(e=>!e),M=()=>T(e=>!e),O=e=>f(e.target.value),W=e=>P(e.target.value),D=()=>_(e=>!e),F=()=>{R(E),u(E)};return(0,s.useEffect)(()=>{f(null),S(null)},[o]),(0,i.jsxs)(i.Fragment,{children:[I&&(0,i.jsx)(eI,{toggleShowAlert:D,title:"Saved to CMS",buttonText:"Close"}),(0,i.jsx)(h,{children:(0,i.jsx)("div",{style:{flex:1,display:"flex"},children:(0,i.jsxs)("div",{style:{flex:2,flexDirection:"column",display:"flex"},children:[r&&!n?(0,i.jsx)("div",{style:{justifyContent:"center",display:"flex",padding:"40px 0"},children:(0,i.jsx)("div",{className:"loading-bar"})}):(0,i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"20px"},children:[(0,i.jsx)(m,{children:"Image Detections"}),n&&(0,i.jsx)("div",{style:{margin:"0 0 20px 0"},children:(0,i.jsxs)("div",{style:{flex:2,alignItems:"center",display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"0"},children:[Z?(0,i.jsx)(N,{name:"Image tags",placeholder:"Enter a description",multiline:!0,value:null!==E?E:null!==k?k:n,onChange:W,fullWidth:!0,sx:{background:"white"}}):(0,i.jsx)("p",{style:{padding:0,margin:0},children:k||n}),(0,i.jsx)(ed,{isEditing:Z,toggleIsEditing:M,edits:E,editsSaved:k,setEdits:P,setEditsSaved:F})]})})]}),n&&(0,i.jsx)("div",{style:{borderTop:"1px solid #909EB0",padding:"20px"},children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",paddingTop:0},children:[" ",n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{display:"flex"},children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",width:"100%",justifyContent:"space-between"},children:[(0,i.jsx)(y,{children:"GPT Creativity Level"}),(0,i.jsx)(j.Z,{sx:{width:120},children:(0,i.jsx)(b.Z,{labelId:"creativity-select-label",id:"creativity-select",value:o,onChange:d,sx:v,children:ec.map(e=>(0,i.jsx)(w.Z,{value:e.value,children:e.label},e.label))})}),(0,i.jsx)(ev,{disabled:a,onClick(e){S(null),f(null),t(e)},header:"Generate Alt Tag",loading:r,sx:{marginBottom:"20px",width:"180px"}})]})}),r?(0,i.jsx)("div",{style:{justifyContent:"center",display:"flex",padding:"20px 0"},children:(0,i.jsx)("div",{className:"loading-bar"})}):(0,i.jsxs)("div",{style:{flex:2,display:"flex",justifyContent:"space-between",padding:"20px 0"},children:[p?(0,i.jsx)(N,{name:"chatGPT tags",placeholder:"Enter an alt tag",multiline:!0,value:null!==x?x:null!==C?C:l,onChange:O,fullWidth:!0,sx:{background:"white"}}):(0,i.jsx)("p",{style:{padding:0,margin:0},children:null!=C?C:l}),l&&(0,i.jsx)(ed,{isEditing:p,toggleIsEditing:A,edits:x,editsSaved:C,setEdits:f,setEditsSaved:S,clearGPT:c})]})]})]})})]})})})]})};ep.propTypes=eu,ep.defaultProps={chatGTP:null,loading:!1,suggestion:null,unsupported:!1};let eg={src:(0,A.shape)({image:A.string.isRequired,current:A.string})},ex=e=>{let{index:t,src:n,password:l,creativity:r,handleChange:a,gptModel:o}=e,[d,u]=(0,s.useState)(!1),[c,p]=(0,s.useState)(null),[g,x]=(0,s.useState)(null),[f,h]=(0,s.useState)(null),[m,y]=(0,s.useState)(null),[v,j]=(0,s.useState)(null),[b,w]=(0,s.useState)(null);async function C(){u(!0),w(null);try{let[e,t]=await Promise.all([U(n.image),K(n.image,l)]),i=[...e.tags||[],...e.description||[],...e.readOCR||[],...e.brands||[],...t||[]],r=i.join(", ");0===i.length&&(r="No tags were detected"),x(r),p(i.join(", ")),u(!1)}catch(s){u(!1)}}async function S(){let[e,t]={0:[f,h],.5:[m,y],1:[v,j]}[r]||[];if(e&&e.trim()){w(e.trim()),u(!1);return}w(null),u(!0);try{let n=await X(c,l,r,o);if(!n)throw Error("No response from GPT");t(n),w(n.trim()),u(!1)}catch(s){let i=s.message||"No response from GPT";t(i),w(i),u(!1)}}return(0,s.useEffect)(()=>{setTimeout(()=>{C()},1e3*Math.floor(t/7))},[]),(0,s.useEffect)(()=>{u(!1),x(null),w(null)},[n]),(0,s.useEffect)(()=>{g&&S(c)},[r]),(0,i.jsx)(ep,{onClick:S,handleChange:a,alt:"",header:"Image Analysis",suggestion:g,chatGTP:b,creativity:r,loading:d,unsupported:n.image.endsWith(".gif"),updateDetections:function(e){u(!1),x(e),p(e),w(null),h(null),y(null),j(null)},clearGPT:function(){u(!1),w(null),h(null),y(null),j(null)}})};ex.propTypes=eg,ex.defaultProps={src:{current:null}};var ef=n(8987);let eh=(0,d.Z)(ef.Z)(e=>{let{secondary:t}=e;return{color:t?"#fff":"#000",backgroundColor:t?"#000":"rgb(118, 248, 176)",border:"none",borderRadius:4,height:60,textAlign:"center",cursor:"pointer",width:"100%",padding:"0 20px",textTransform:"none",fontSize:16,"&:hover":{backgroundColor:t?"#6B6B6B":"rgb(118, 248, 176)",border:"none"},"&:disabled":{cursor:"not-allowed",pointerEvents:"all !important"}}}),em={onClick:A.func.isRequired,header:A.string.isRequired,loading:A.bool,disabled:A.bool},ey=e=>{let{onClick:t,header:n,loading:l,disabled:r,secondary:s=!1,sx:a}=e;return(0,i.jsx)(eh,{loading:l,variant:"outlined",onClick:t,disabled:r,secondary:s.toString(),sx:a,children:n})};ey.propTypes=em,ey.defaultProps={loading:!1,disabled:!1};var ev=ey;let ej={src:(0,A.shape)({image:A.string.isRequired,current:A.string}),password:A.string},eb=e=>{let{src:t,password:n,creativity:l,gptModel:r}=e,[a,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[c,p]=(0,s.useState)(null),[g,x]=(0,s.useState)(null),[f,h]=(0,s.useState)(null),[m,y]=(0,s.useState)(null),[v,j]=(0,s.useState)(null);async function b(){o(!0);try{let e=await K(t.image,n);e.length>0?(p(e.join(", ")),u(e),w(e)):(console.log(error),o(!1))}catch(i){console.log(i),o(!1)}}async function w(e){if(0==l&&g){j(g.trim()),o(!1);return}if(.5==l&&f){j(f.trim()),o(!1);return}if(1==l&&m){j(m.trim()),o(!1);return}j(null),o(!0);let t=await X(e,n,l,r);0==l&&x(t),.5==l&&h(t),1==l&&y(t),j(t.trim()),o(!1)}return(0,s.useEffect)(()=>{o(!1),p(null),j(null)},[t]),(0,s.useEffect)(()=>{c&&w(d)},[l]),(0,i.jsx)(ep,{onClick:b,alt:"",header:"Google Cloud Vision",suggestion:c,chatGTP:v,loading:a})};eb.propTypes=ej,eb.defaultProps={src:{current:null},password:null};var ew=n(629);let eC=(0,d.Z)(ew.Z)({display:"flex",marginTop:50,boxShadow:"none",background:"#F7F7F7",border:"1px solid #909EB0"}),eS=(0,d.Z)("div")({margin:0,flex:1,padding:20,display:"flex",flexDirection:"column",justifyContent:"flex-start"}),eZ=(0,d.Z)("div")({flex:3,marginLeft:20,display:"flex",flexDirection:"column",borderLeft:"1px solid #909EB0"}),eT=(0,d.Z)("div")({borderTop:"1px solid #909EB0",display:"flex",flex:1,alignItems:"flex-start","&:nth-of-type(1)":{borderTop:"none"}}),eE={image:A.object.isRequired,password:A.string.isRequired,index:A.number.isRequired,total:A.number.isRequired},eP=e=>{let{image:t,password:n,index:l,gptModel:r}=e,[a,o]=(0,s.useState)(0);return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,i.jsxs)(eC,{elevation:8,children:[(0,i.jsxs)(eS,{children:[(0,i.jsxs)("div",{style:{margin:"0 0 20px 0",fontWeight:"bold"},children:["Image ",l+1]}),(0,i.jsx)("img",{src:t.image,alt:"Broken image on source site.",style:{width:"100%",borderRadius:"6px"}}),(0,i.jsx)("p",{style:{visibility:"hidden",height:"20px",margin:"20px 0 0 0"},children:"3"})]}),(0,i.jsxs)(eZ,{elevation:8,children:[(0,i.jsx)(eT,{children:(0,i.jsxs)("div",{style:{display:"flex",flex:"2 1 0%",flexDirection:"column",padding:"20px"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",minWidth:200,padding:"0 0 20px 0",margin:0},children:"Current Alt Tag"}),(0,i.jsx)("div",{style:{padding:0},children:t.current})]})}),(0,i.jsx)(eT,{children:(0,i.jsx)(ex,{index:l,src:t,password:n,creativity:a,handleChange:function(e){o(e.target.value)},gptModel:r})})]})]})})};eP.propTypes=eE,eP.defaultProps={};let ek=(0,s.forwardRef)(function(e,t){return(0,i.jsx)(_.Z,{direction:"down",ref:t,...e})}),eR=e=>{let{toggleShowAlert:t,title:n,buttonText:l}=e;return(0,i.jsxs)(P.Z,{open:open,TransitionComponent:ek,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{padding:"20px"}}},children:[(0,i.jsx)(I.Z,{children:n}),(0,i.jsx)(k.Z,{children:(0,i.jsx)(ev,{onClick:t,header:l})})]})};var eI=eR;function e_(){let[e,t]=(0,s.useState)(""),[n,l]=(0,s.useState)(""),[a,o]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),[c,p]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1),[f,h]=(0,s.useState)("gpt-4"),{state:m,dispatch:y}=(0,s.useContext)(T.s),C=()=>x(e=>!e);async function E(i){let l;i.preventDefault(),y({type:"resetCounter"}),(null==a?void 0:a.length)>0&&o(null),(l=e.startsWith("www")?"https://".concat(e):e.startsWith("https://")?e:"https://".concat(e))!==e&&t(l),u(!0);let r=await fetch("".concat(Z,"/generate"),{method:"POST",headers:{"Content-Type":"application/json",authentication:n},body:JSON.stringify({url:l})});if(401===r.status){u(!1),alert("Wrong password");return}p(!0);let s=await r.json();if(0===s.result.length){u(!1),alert("No image tags found");return}let d=s.result.map(e=>{let t=new URL(e.image).searchParams,n=t.get("width");if(!n||!(n<200))return e;{var i,l,r,s,a;let o=(i=e.image,r="400px",s=RegExp("([?&])"+(l="width")+"=.*?(&|$)","i"),a=-1!==i.indexOf("?")?"&":"?",i.match(s)?i.replace(s,"$1"+l+"="+r+"$2"):i+a+l+"="+r);return{...e,image:o}}});o(d),u(!1)}return c?(0,i.jsxs)("div",{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{children:"Altify - Valtech Future Studio"}),(0,i.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,i.jsxs)("main",{className:S().main,children:[g&&(0,i.jsx)(eI,{toggleShowAlert:C,title:"Exported (".concat(m.counter,") Tags to CMS"),buttonText:"Close"}),(0,i.jsxs)("form",{onSubmit:E,children:[(0,i.jsx)("img",{src:"./valtechLogo-black.png",className:S().icon,alt:"valtech logo"}),(0,i.jsx)(N,{autoFocus:!0,type:"text",name:"image url",placeholder:"Enter a url",value:e,onChange:function(e){t(e.target.value)},fullWidth:!0}),(0,i.jsx)("input",{disabled:!e,type:"submit",value:"Analyze URL",style:{width:320,height:"60px"}})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",margin:"24px 0 80px"},children:[(0,i.jsx)("div",{style:{margin:"0 auto",height:36},children:d&&(0,i.jsx)("div",{className:"loading-bar"})}),(null==a?void 0:a.length)&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("p",{style:{},children:[a.length," Images Detected"]}),(0,i.jsx)(j.Z,{sx:{width:160},children:(0,i.jsx)(b.Z,{labelId:"gpt-model-select",id:"model-select",value:f,onChange:function(e){let{value:t}=e.target;h(t)},sx:v,children:[{model:"gpt-4"},{model:"gpt-3.5-turbo"}].map(e=>(0,i.jsx)(w.Z,{value:e.model,children:e.model},e.model))})})]}),(0,i.jsx)(ev,{secondary:!0,exact:"true",onClick:C,header:0===m.counter?"Export to CMS":"Export (".concat(m.counter,") to CMS"),sx:{width:"180px"}})]}),Array.isArray(a)&&a.map((e,t)=>(0,i.jsx)(eP,{index:t,image:e,password:n,total:null==a?void 0:a.length,gptModel:f},"altify-image-".concat(t)))]})]})]}):(0,i.jsx)(z,{autoFocus:!0,setCorrectPassword:p,handlePasswordChange:function(e){l(e.target.value)},password:n})}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[869,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);