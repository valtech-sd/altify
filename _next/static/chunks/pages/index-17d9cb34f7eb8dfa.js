(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4639)}])},4639:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var s=n(5893),a=n(9008),r=n.n(a),i=n(7294),l=n(2337),o=n(4848),c=n.n(o);let u="https://altify-api.azurewebsites.net";var d=n(7297),p=n(9521);function g(){let e=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n"]);return g=function(){return e},e}function h(){let e=(0,d.Z)(["\n  margin-right: 8px;\n"]);return h=function(){return e},e}let f=p.ZP.p(g()),x=p.ZP.b(h());function m(){let e=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return m=function(){return e},e}let j=p.ZP.div(m()),y=e=>{let{altText:t}=e;return(0,s.jsx)(j,{children:(0,s.jsxs)(f,{children:[(0,s.jsx)(x,{children:"Current Alt Tag: "}),t]})})};var w=n(5697),b=n.n(w),v=n(1749),C=n(5036);let T=["ImageType","Faces","Adult","Categories","Color","Tags","Description","Objects","Brands"],P=async e=>e.filter(e=>"text"===e.name.toLowerCase()),S=async e=>e.filter(e=>"handwriting"===e.name.toLowerCase()),_=e=>new Promise(t=>{setTimeout(t,e)});async function A(e){let t=new v.FV(new C.C({inHeader:{"Ocp-Apim-Subscription-Key":"b8de935b3a0b4bafaea5fe58efc98d22"}}),"https://valtech-sd-altify-cv-api.cognitiveservices.azure.com/"),n=await t.analyzeImage(e,{visualFeatures:T});return(P(n.tags)||S(n.tags))&&(n.text=await k(t,e)),{URL:e,...n}}let k=async(e,t)=>{let n=await e.read(t),s=n.operationLocation.split("/").slice(-1)[0],a=Date.now();for(console.log("".concat(a," -").concat(null==n?void 0:n.status," "));"succeeded"!==n.status;)await _(500),console.log("".concat(Date.now()-a," -").concat(null==n?void 0:n.status," ")),n=await e.getReadResult(s);return n.analyzeResult};async function Z(e,t){let n=await fetch("".concat(u,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json",authentication:t},body:JSON.stringify({tags:e})}),s=await n.json();return s.result}function N(){let e=(0,d.Z)(["\n  padding: 12px 0;\n  color: black;\n  background-color: rgb(118, 248, 176);\n  border: none;\n  border-radius: 4px;\n  text-align: center;\n  cursor: pointer;\n  width: 100%;\n"]);return N=function(){return e},e}let O=p.ZP.input(N()),R=e=>{let{onClick:t,header:n}=e;return(0,s.jsx)(O,{type:"button",value:"Get Suggestion (".concat(n,")"),onClick:t})};function E(){let e=(0,d.Z)(["\n  border-radius: 4px;\n  border: 1px solid #424242;\n  padding: 10px;\n"]);return E=function(){return e},e}function z(){let e=(0,d.Z)(["\n  color: rgb(118, 248, 176);\n  margin: 0,\n  text-align: center;\n"]);return z=function(){return e},e}let G=p.ZP.div(E()),L=p.ZP.h2(z()),D={onClick:w.func.isRequired,header:w.string.isRequired,fetched:w.bool.isRequired,suggestion:w.string,chatGTP:w.string},q=e=>{let{onClick:t,header:n,fetched:a,suggestion:r,chatGTP:i,altText:l}=e;return(0,s.jsx)("div",{style:{marginTop:5},children:a?(0,s.jsxs)(G,{children:[(0,s.jsx)(L,{children:n}),(0,s.jsxs)(f,{children:[(0,s.jsx)(x,{children:"Suggested: "}),r||(0,s.jsx)("span",{className:"loading-bar small"})]}),(0,s.jsxs)(f,{children:[(0,s.jsx)(x,{children:"GPT Suggestion: "}),i||(0,s.jsx)("span",{className:"loading-bar small"})]})]}):(0,s.jsx)(R,{onClick:t,header:n})})};q.propTypes=D,q.defaultProps={suggestion:"",chatGTP:""};let I={src:(0,w.shape)({image:w.string.isRequired,current:w.string})},B=e=>{let{src:t,password:n}=e,[a,r]=(0,i.useState)(!1),[l,o]=(0,i.useState)(null),[c,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{r(!1),o(null),u(null)},[t]),(0,s.jsx)(q,{src:t,onClick:function(){r(!0),A(t.image).then(async e=>{try{let t=e.tags.map(e=>e.name);t.push(e.description.captions[0].text);let s=await Z(t,n);u(s),o(e.description.captions[0].text)}catch(a){console.log(a),r(!1)}})},alt:"",header:"Azure",fetched:a,suggestion:l,chatGTP:c})};async function F(e,t){try{let n=await fetch("".concat(u,"/suggestions"),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3030"),"Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e,authentication:t}}),s=await n.json();return s}catch(a){console.log(a)}}B.propTypes=I,B.defaultProps={src:{current:null}};let H={src:(0,w.shape)({image:w.string.isRequired,current:w.string}),password:w.string},J=e=>{let{src:t,password:n}=e,[a,r]=(0,i.useState)(!1),[l,o]=(0,i.useState)(null),[c,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{r(!1),o(null),u(null)},[t]),(0,s.jsx)(q,{src:t,onClick:function(){r(!0),F(t.image,n).then(async e=>{try{let t=await Z(e,n);u(t),o(e.join(", "))}catch(s){console.log(s),r(!1)}})},alt:"",header:"Cloud Vision",fetched:a,suggestion:l,chatGTP:c})};J.propTypes=H,J.defaultProps={src:{current:null},password:null},b().string,b().func,b().string,b().string,b().string;let U=e=>{let{name:t,onChange:n,placeholder:a,type:r,value:i}=e;return(0,s.jsx)("input",{type:r,name:t,placeholder:a,value:i,onChange:n})};function V(){let[e,t]=(0,i.useState)(""),[n,a]=(0,i.useState)(""),[o,d]=(0,i.useState)(null),[p,g]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1);async function x(t){t.preventDefault(),g(!0);let s=await fetch("".concat(u,"/generate"),{method:"POST",headers:{"Content-Type":"application/json",authentication:n},body:JSON.stringify({url:e})});if(401===s.status){alert("Wrong password"),g(!1);return}f(!0);let a=await s.json();d(a.result),g(!1)}return(0,s.jsxs)("div",{children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"OpenAI Quickstart"}),(0,s.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,s.jsxs)("main",{className:c().main,children:[(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsx)("img",{src:"./valtechLogo-black.png",className:c().icon}),(0,s.jsx)(U,{type:"text",name:"image url",placeholder:"Enter a url",value:e,onChange:e=>t(e.target.value)}),!h&&(0,s.jsx)(U,{type:"password",name:"password",placeholder:"Enter the password",value:n,onChange:function(e){a(e.target.value)}}),(0,s.jsx)("input",{disabled:!n||!e,type:"submit",value:"Analize URL"})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",marginTop:"20px"},children:[(0,s.jsx)("div",{style:{margin:"0 auto"},children:p&&(0,s.jsx)("div",{className:"loading-bar"})}),o&&(0,s.jsx)(l.G,{columnsCountBreakPoints:{350:1,750:2,900:3},children:(0,s.jsx)(l.Z,{gutter:"1.5rem",children:Array.isArray(o)&&o.map((e,t)=>(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)("img",{src:e.image,alt:"",style:{width:"100%"}}),(0,s.jsx)(y,{altText:e.current}),(0,s.jsx)(B,{src:e,password:n}),(0,s.jsx)(J,{src:e,password:n})]},"altify-image-".concat(t)))})})]})]})]})}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[828,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);