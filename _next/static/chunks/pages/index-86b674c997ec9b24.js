(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6699)}])},6699:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var s=n(5893),a=n(9008),i=n.n(a),l=n(7294),o=n(4848),r=n.n(o),c=n(3454);let d=c.env.NEXT_PUBLIC_API_URL||"http://localhost",u=c.env.NEXT_PUBLIC_API_PORT||3030,p=c.env.NEXT_PUBLIC_LOCAL_URL||"http://localhost",g=c.env.NEXT_PUBLIC_LOCAL_PORT||3e3;async function x(e){let t={Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"".concat(p,":").concat(g),"Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type, Authorization",image:e};try{let n=await fetch("".concat(d,":").concat(u,"/suggestions"),{headers:t}),s=await n.json();return s}catch(a){console.log(a)}}var h=n(1749),y=n(5036),m=n(3454);let j=m.env.NEXT_PUBLIC_MS_CV_API_KEY,_=m.env.NEXT_PUBLIC_MS_CV_ENDPOINT,f=["ImageType","Faces","Adult","Categories","Color","Tags","Description","Objects","Brands"],b=async e=>e.filter(e=>"text"===e.name.toLowerCase()),w=async e=>e.filter(e=>"handwriting"===e.name.toLowerCase()),C=e=>new Promise(t=>{setTimeout(t,e)});async function v(e){let t=new h.FV(new y.C({inHeader:{"Ocp-Apim-Subscription-Key":j}}),_),n=await t.analyzeImage(e,{visualFeatures:f});return(b(n.tags)||w(n.tags))&&(n.text=await A(t,e)),{URL:e,...n}}let A=async(e,t)=>{let n=await e.read(t),s=n.operationLocation.split("/").slice(-1)[0],a=Date.now();for(console.log("".concat(a," -").concat(null==n?void 0:n.status," "));"succeeded"!==n.status;)await C(500),console.log("".concat(Date.now()-a," -").concat(null==n?void 0:n.status," ")),n=await e.getReadResult(s);return n.analyzeResult};async function S(e){let t=await fetch("".concat(d,":").concat(u,"/openAPI"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:e})}),n=await t.json();return n.result}let T=e=>{let{src:t}=e,[n,a]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[r,c]=(0,l.useState)(!1),d=async()=>{a(!0),x(t).then(async e=>{try{let t=await S(e);c(t),o(e.join(", "))}catch(n){console.log(n),a(!1)}})};return(0,s.jsx)("div",{style:{margin:"10px 0"},children:n?(0,s.jsxs)("div",{style:{borderRadius:"4px",border:"1px solid #424242",padding:"10px"},children:[(0,s.jsx)("h2",{style:{color:"#4285F4",margin:0,textAlign:"center"},children:"Google Cloud Vision"}),(0,s.jsxs)("p",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)("b",{style:{marginRight:"8px"},children:"Suggested: "}),i||(0,s.jsx)("span",{className:"loading-bar small"})]}),(0,s.jsxs)("p",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)("b",{style:{marginRight:"8px"},children:"GPT Suggestion: "}),r||(0,s.jsx)("span",{className:"loading-bar small"})]})]}):(0,s.jsx)("input",{type:"button",value:"Get Suggestion (Cloud Vision)",onClick:d,style:{padding:"12px 0",color:"black",backgroundColor:"#4285F4",color:"#fff",border:"none",borderRadius:"4px",textAlign:"center",cursor:"pointer",width:"100%"}})})},N=e=>{let{src:t}=e,[n,a]=(0,l.useState)(!1),[i,o]=(0,l.useState)(""),[r,c]=(0,l.useState)(""),d=()=>{a(!0),v(t).then(async e=>{try{let t=e.tags.map(e=>e.name);t.push(e.description.captions[0].text);let n=await S(t);c(n),o(e.description.captions[0].text)}catch(s){console.log(s),a(!1)}})};return(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:t,alt:r||"",style:{width:"100%"}}),n?(0,s.jsxs)("div",{style:{borderRadius:"4px",border:"1px solid #424242",padding:"10px"},children:[(0,s.jsx)("h2",{style:{color:"rgb(118, 248, 176)",margin:0,textAlign:"center"},children:"Azure"}),(0,s.jsxs)("p",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)("b",{style:{marginRight:"8px"},children:"Suggested: "}),i||(0,s.jsx)("span",{className:"loading-bar small"})]}),(0,s.jsxs)("p",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)("b",{style:{marginRight:"8px"},children:"GPT Suggestion: "}),r||(0,s.jsx)("span",{className:"loading-bar small"})]})]}):(0,s.jsx)("input",{type:"button",value:"Get Suggestion (Azure)",onClick:d,style:{padding:"12px 0",color:"black",backgroundColor:"rgb(118, 248, 176)",border:"none",borderRadius:"4px",textAlign:"center",cursor:"pointer",width:"100%"}}),(0,s.jsx)(T,{src:t})]})};var P=n(2337);function L(){let[e,t]=(0,l.useState)(""),[n,a]=(0,l.useState)(),[o,c]=(0,l.useState)(!1);async function d(t){t.preventDefault(),c(!0);let n=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),s=await n.json();a(s.result),c(!1)}return(0,s.jsxs)("div",{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"OpenAI Quickstart"}),(0,s.jsx)("link",{rel:"icon",href:"/valtechLogo-black.png"})]}),(0,s.jsxs)("main",{className:r().main,children:[(0,s.jsxs)("form",{onSubmit:d,children:[(0,s.jsx)("img",{src:"/valtechLogo-black.png",className:r().icon}),(0,s.jsx)("input",{type:"text",name:"image url",placeholder:"Enter an url",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)("input",{type:"submit",value:"Analize URL"})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"80%",marginTop:"20px"},children:[(0,s.jsx)("div",{style:{margin:"0 auto"},children:o&&(0,s.jsx)("div",{className:"loading-bar"})}),n&&(0,s.jsx)(P.G,{columnsCountBreakPoints:{350:1,750:2,900:3},children:(0,s.jsx)(P.Z,{gutter:"1.5rem",children:Array.isArray(n)&&n.map((e,t)=>(0,s.jsx)(N,{src:e.image},"altify-image-".concat(t)))})})]})]})]})}},4848:function(e){e.exports={main:"index_main__3wZvj",icon:"index_icon__CgRrC",result:"index_result__66e57"}}},function(e){e.O(0,[528,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);